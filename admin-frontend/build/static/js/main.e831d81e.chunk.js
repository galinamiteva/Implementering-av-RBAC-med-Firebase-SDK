(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{543:function(e){e.exports=JSON.parse('{"translation":{"404":"404","login":"Login","register":"Register","overview":"Overview","manage_stations":"Stations","bookings":"Bookings","users":"Users","sites":"Sites","station_detail":"Station Detail","account":"Account","settings":"Settings"}}')},788:function(e,t,a){},796:function(e,t,a){"use strict";a.r(t);var n=a(16),r=a(1),c=a(34),o=a.n(c),s=a(43),i=a(164),l=a(194),u=a(29),d=(a(575),a(797),a(14)),j=a(329),h=(a(756),a(911));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var b=a(24),m=a(910),p=a(867),x=a(921),O=Object(p.a)((function(){return Object(x.a)({"@global":{"*":{boxSizing:"border-box",margin:0,padding:0},html:{"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",height:"100%",width:"100%"},body:{backgroundColor:"#f4f6f8",height:"100%",width:"100%"},a:{textDecoration:"none"},"#root":{height:"100%",width:"100%"}}})})),g=function(){return O(),null},f=a(21),v=a(544),y=Object(v.a)({palette:{background:{dark:"#F4F6F8",default:f.a.common.white,paper:f.a.common.white},primary:{main:"#293827"},secondary:{main:"#CC3E31"},text:{primary:f.a.blueGrey[900],secondary:f.a.blueGrey[600]},type:"light"},shadows:["none","0 0 0 1px rgba(63,63,68,0.05), 0 1px 2px 0 rgba(63,63,68,0.15)","0 0 1px 0 rgba(0,0,0,0.31), 0 2px 2px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 5px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 8px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 9px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 10px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 11px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 12px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 13px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 14px 24px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 16px 28px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 18px 30px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 20px 32px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 22px 34px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 24px 36px -8px rgba(0,0,0,0.25)"],typography:{h1:{fontWeight:500,fontSize:35,letterSpacing:"-0.24px"},h2:{fontWeight:500,fontSize:29,letterSpacing:"-0.24px"},h3:{fontWeight:500,fontSize:24,letterSpacing:"-0.06px"},h4:{fontWeight:500,fontSize:20,letterSpacing:"-0.06px"},h5:{fontWeight:500,fontSize:16,letterSpacing:"-0.05px"},h6:{fontWeight:500,fontSize:14,letterSpacing:"-0.05px"},overline:{fontWeight:500}}}),C=y,w=a(13),S=a(5),B=a(9),I=a(8),k=a.n(I),N=a(4),P=a(527),A=a.n(P),T=a(528),U=a.n(T),W=a(53),R=a(914),E=a(808),F=a(879),D=a(880),L=a(806),M=a(878),z=a(922),_=a(530),q=a.n(_),Y=a(529),H=a.n(Y),V=a(884),J=a(251),G=a.n(J),K=a(525),$=a.n(K),Z=a(252),X=a.n(Z),Q=a(334),ee=a.n(Q),te=a(337),ae=a.n(te),ne=a(526),re=a.n(ne),ce=a(338),oe=a.n(ce),se=a(339),ie=a.n(se),le=a(336),ue=a.n(le),de=a(335),je=a.n(de),he=a(340),be=a.n(he),me=a(7),pe=a(799),xe=a(870),Oe=a(920),ge=a(927),fe=a(0),ve=["className","href","title","icon"],ye=Object(p.a)((function(e){return{item:{display:"flex",paddingTop:0,paddingBottom:0},button:{color:e.palette.text.secondary,fontWeight:e.typography.fontWeightMedium,justifyContent:"flex-start",letterSpacing:0,padding:"10px 8px",textTransform:"none",width:"100%"},iconButton:{justifyContent:"flex-start"},icon:{paddingBottom:35},title:{marginRight:"auto"},active:{color:e.palette.primary.main,"& $title":{fontWeight:e.typography.fontWeightMedium},"& $icon":{color:e.palette.primary.main}}}})),Ce=function(e){var t=e.className,a=e.href,r=e.title,c=e.icon,o=Object(me.a)(e,ve),i=ye(),l=Object(Oe.a)().t;return Object(fe.jsxs)(pe.a,Object(n.a)(Object(n.a)({className:Object(N.a)(i.item,t),disableGutters:!0},o),{},{children:[Object(fe.jsx)(xe.a,{activeclassname:i.active,className:i.iconButton,component:s.c,to:a,children:Object(fe.jsx)(ge.a,{className:i.icon,children:c})}),Object(fe.jsx)(xe.a,{activeclassname:i.active,className:i.button,component:s.c,to:a,children:Object(fe.jsx)("span",{className:i.title,children:l(r)})})]}))},we=a(918),Se=a(929),Be=a(928),Ie=a(241),ke=a.n(Ie),Ne=a(930),Pe=a(17),Ae=a(916),Te=a(524),Ue=a.n(Te),We=Ue.a.create({baseURL:"https://europe-west1-admin-rbac-4a804.cloudfunctions.net",timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/json"}}),Re=We,Ee=Object(p.a)((function(){return{root:{},avatar:{width:60,height:60},items:{display:"flex",borderTop:"2px solid #293827",color:"black"},circle:{borderRadius:"50%"}}})),Fe=Object(Pe.a)(Ae.a)((function(e){var t=e.theme;return{"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(t.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:'""'}}}})),De=function(){var e=Ee(),t=Object(r.useState)([]),a=Object(S.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)([]),i=Object(S.a)(o,2),l=i[0],u=i[1];function j(){return(j=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/accounts");case 3:t=e.sent,(a=t.status)>=200&&a<300&&c(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function h(){return(h=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/users");case 3:t=e.sent,(a=t.status)>=200&&a<300&&u(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){j.apply(this,arguments)}(),function(){h.apply(this,arguments)}()}),[]);var b=Object(d.getFirebase)().auth().currentUser.uid,m=function(e){var t=null,a=null,n=null,r=null;return l.forEach((function(c){e===c.id&&(t=c.role,a=c.accountId,n=c.email,r=c.name)})),{usersRole:t,usersAccountId:a,usersEmail:n,usersName:r}},p=m(b).usersAccountId;return Object(fe.jsx)(s.c,{to:"/profile-page",children:Object(fe.jsxs)(we.a,{alignItems:"flex-start",className:e.items,children:[Object(fe.jsx)(Be.a,{sx:{display:"flex",justifyContent:"flex-start"},children:Object(fe.jsx)(Fe,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:Object(fe.jsx)(R.a,{children:Object(fe.jsx)(ke.a,{email:m(b).usersEmail,size:42,className:e.circle})})})}),Object(fe.jsx)(Se.a,{primary:m(b).usersName,secondary:Object(fe.jsx)(Ne.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:function(e){var t=null;return n.forEach((function(a){e===a.id&&(t=a.companyName)})),t}(p)})})]})})},Le=a(875),Me=a(32),ze=a.n(Me),_e=["severity","error","onClose"],qe=Object(r.forwardRef)((function(e,t){var a=e.severity,r=void 0===a?"success":a,c=e.error,o=void 0===c?"":c,s=e.onClose,i=Object(me.a)(e,_e);return Object(fe.jsx)(Le.a,Object(n.a)(Object(n.a)({ref:t},i),{},{anchorOrigin:{vertical:"top",horizontal:"right"},open:!0,severity:r,message:o,autoHideDuration:3e3,onClose:s,action:Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsx)(L.a,{size:"small","aria-label":"close",color:"inherit",onClick:s,children:Object(fe.jsx)(ze.a,{fontSize:"small"})})})}))})),Ye=qe,He=a.p+"static/media/world.447daa58.png",Ve="ADMIN_USER",Je=function(e){return e===Ve},Ge=[],Ke=[{href:"/dashboard",title:"overview",icon:Object(fe.jsx)(G.a,{})},{href:"/customers",title:"Customers",icon:Object(fe.jsx)(ee.a,{})},{href:"/stations",title:"manage_stations",icon:Object(fe.jsx)(je.a,{})},{href:"/users",title:"Users",icon:Object(fe.jsx)($.a,{})},{href:"/products",title:"Products",icon:Object(fe.jsx)(ue.a,{})},{href:"/sites",title:"Sites",icon:Object(fe.jsx)(X.a,{})},{href:"/accounts",title:"Accounts",icon:Object(fe.jsx)(re.a,{})},{href:"/checkout-products",title:"Checkout Products",icon:Object(fe.jsx)(ae.a,{})},{href:"/extra-products",title:"Extra Products",icon:Object(fe.jsx)(oe.a,{})},{href:"/contract-products",title:"Contract Products",icon:Object(fe.jsx)(ie.a,{})},{href:"/promo-codes",title:"Promo Codes",icon:Object(fe.jsx)(be.a,{})}],$e=[{href:"/dashboard",title:"overview",icon:Object(fe.jsx)(G.a,{})},{href:"/customers",title:"Customers",icon:Object(fe.jsx)(ee.a,{})},{href:"/stations",title:"manage_stations",icon:Object(fe.jsx)(je.a,{})},{href:"/products",title:"Products",icon:Object(fe.jsx)(ue.a,{})},{href:"/sites",title:"Sites",icon:Object(fe.jsx)(X.a,{})},{href:"/checkout-products",title:"Checkout Products",icon:Object(fe.jsx)(ae.a,{})},{href:"/extra-products",title:"Extra Products",icon:Object(fe.jsx)(oe.a,{})},{href:"/contract-products",title:"Contract Products",icon:Object(fe.jsx)(ie.a,{})},{href:"/promo-codes",title:"Promo Codes",icon:Object(fe.jsx)(be.a,{})}],Ze=[{href:"/dashboard",title:"overview",icon:Object(fe.jsx)(G.a,{})},{href:"/sites",title:"Sites",icon:Object(fe.jsx)(X.a,{})}],Xe=240,Qe=Object(p.a)((function(e){return{mobileDrawer:{width:256},desktopDrawer:{width:256,top:64,height:"calc(100% - 64px)"},avatar:{cursor:"pointer",width:64,height:64},flexbox:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},title:{color:f.a.common.white},logo:{width:130},icon:{color:f.a.common.white},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:Xe,width:"calc(100% - ".concat(Xe,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:Xe,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:Xe,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(B.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(n.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)}}})),et=function(){var e,t,a=Qe(),n=Object(b.f)(),c=Object(r.useState)(""),o=Object(S.a)(c,2),i=o[0],l=o[1],u=Object(W.a)(),j=Object(r.useState)(!1),h=Object(S.a)(j,2),m=h[0],p=h[1],x=Object(r.useState)([]),O=Object(S.a)(x,2),g=O[0],f=O[1],v=Object(r.useState)([]),y=Object(S.a)(v,2),C=y[0],I=y[1];function P(){return(P=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/accounts");case 3:t=e.sent,(a=t.status)>=200&&a<300&&f(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function T(){return(T=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/users");case 3:t=e.sent,(a=t.status)>=200&&a<300&&I(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){return function(){P.apply(this,arguments)}(),function(){T.apply(this,arguments)}(),function(){f([]),I([])}}),[]);var _=function(e){var t=null,a=null;return C.forEach((function(n){e===n.id&&(t=n.role,a=n.accountId)})),{usersRole:t,usersAccountId:a}},Y=Object(d.getFirebase)().auth().currentUser.uid,J=_(Y).usersRole,G=_(Y).usersAccountId,K=Je(J),$=function(e){var t="";return g.forEach((function(a){e===a.id&&(t=a.type)})),t}(G);Ge=K?Ke:K||"BASIC_ACCOUNT"!==$?Ze:$e;var Z=function(e){return function(t){(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&p(e)}},X=Object(fe.jsxs)(R.a,{className:a.flexbox,children:[Object(fe.jsx)(R.a,{display:"flex",flexDirection:"column",p:2,children:Object(fe.jsx)(E.a,{children:Ge.map((function(e){return Object(fe.jsx)(Ce,{href:e.href,title:e.title,icon:e.icon},e.title)}))})}),Object(fe.jsx)(R.a,{children:Object(fe.jsx)(De,{})})]});return Object(fe.jsxs)(R.a,{className:a.root,children:[Object(fe.jsx)(M.a,{}),Object(fe.jsxs)(F.a,{className:Object(N.a)(a.appBar,Object(B.a)({},a.appBarShift,m)),children:[Object(fe.jsxs)(D.a,{children:[Object(fe.jsx)(L.a,{color:"inherit","aria-label":"open drawer",onClick:function(){p(!0)},edge:"start",className:Object(N.a)(a.menuButton,Object(B.a)({},a.hide,m)),children:Object(fe.jsx)(A.a,{})}),Object(fe.jsx)(s.b,{to:"/",children:Object(fe.jsx)("img",{src:He,alt:"gokaya-logo",className:a.logo})}),Object(fe.jsx)(R.a,{flexGrow:1}),Object(fe.jsx)(L.a,{color:"inherit",onClick:function(){Object(d.getFirebase)().logout().then((function(){n("/auth/login")})).catch((function(e){var t=e.message;null!==t&&""!==t||(t="Something went wrong. Please try again later."),l(t)}))},children:Object(fe.jsx)(U.a,{})})]}),i&&Object(fe.jsx)(Ye,{error:i,onClose:function(){return l("")}})]}),Object(fe.jsxs)(z.a,{open:!0,variant:"permanent",onClose:Z(!1),onOpen:Z(!0),className:Object(N.a)(a.drawer,(e={},Object(B.a)(e,a.drawerOpen,m),Object(B.a)(e,a.drawerClose,!m),e)),classes:{paper:Object(N.a)((t={},Object(B.a)(t,a.drawerOpen,m),Object(B.a)(t,a.drawerClose,!m),t))},children:[Object(fe.jsx)("div",{className:a.toolbar,children:Object(fe.jsx)(L.a,{onClick:function(){p(!1)},children:"rtl"===u.direction?Object(fe.jsx)(H.a,{}):Object(fe.jsx)(q.a,{})})}),Object(fe.jsx)(V.a,{}),X]})]})},tt=a(885),at=Object(p.a)((function(){return{loader:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}})),nt=function(){var e=at();return Object(fe.jsx)("div",{className:e.loader,children:Object(fe.jsx)(tt.a,{})})},rt=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,display:"flex",height:"100%",overflow:"hidden",width:"100%"},wrapper:{display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},contentContainer:{display:"flex",flex:"1 1 auto",overflow:"hidden"},content:{flex:"1 1 auto",height:"100%",overflow:"auto"}}})),ct=function(){var e=rt(),t=Object(i.b)((function(e){return e.firebase.auth}));return Object(d.isLoaded)(t)?Object(d.isLoaded)(t)&&Object(d.isEmpty)(t)?Object(fe.jsx)(b.a,{to:"/auth/login"}):Object(fe.jsxs)("div",{className:e.root,children:[Object(fe.jsx)(et,{}),Object(fe.jsx)("div",{className:e.wrapper,children:Object(fe.jsx)("div",{className:e.contentContainer,children:Object(fe.jsx)("div",{className:e.content,children:Object(fe.jsx)(b.b,{})})})})]}):Object(fe.jsx)(nt,{})},ot=a(886),st=a(887),it=a(531),lt=["children","title"],ut=Object(r.forwardRef)((function(e,t){var a=e.children,r=e.title,c=void 0===r?"":r,o=Object(me.a)(e,lt);return Object(fe.jsxs)("div",Object(n.a)(Object(n.a)({ref:t},o),{},{children:[Object(fe.jsx)(it.a,{children:Object(fe.jsx)("title",{children:c})}),a]}))})),dt=(a(788),Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},style:{width:"100%",height:"80vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#c0c0c0"}}}))),jt=function(){var e=Object(Oe.a)().t,t=dt();return Object(fe.jsx)(ut,{className:t.root,title:e("overview"),children:Object(fe.jsx)(ot.a,{maxWidth:!1,children:Object(fe.jsx)(st.a,{children:Object(fe.jsxs)(R.a,{className:t.style,children:[Object(fe.jsx)(R.a,{children:Object(fe.jsxs)("div",{className:"loader",children:[Object(fe.jsxs)("ul",{children:[Object(fe.jsx)("li",{}),Object(fe.jsx)("li",{}),Object(fe.jsx)("li",{})]}),Object(fe.jsx)("div",{className:"cup",children:Object(fe.jsx)("span",{})})]})}),Object(fe.jsx)(R.a,{sx:{width:"50%",mt:2},children:Object(fe.jsx)("p",{className:"font",children:"Welcome to Admin Dashboard"})})]})})})})},ht=a(534),bt=a(901),mt=a(900),pt=a(902),xt=a(549),Ot=a(903),gt=a(888),ft=a(889),vt=a(890),yt=a(891),Ct=a(892),wt=function(e){var t=e.showModal,a=e.title,n=e.content,r=e.onAccept,c=e.closeModal;return Object(fe.jsxs)(gt.a,{open:t,onClose:c,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(fe.jsx)(ft.a,{children:a}),Object(fe.jsx)(vt.a,{children:Object(fe.jsx)(yt.a,{children:n})}),Object(fe.jsxs)(Ct.a,{children:[Object(fe.jsx)(xe.a,{onClick:r,color:"primary",autoFocus:!0,children:"OK"}),Object(fe.jsx)(xe.a,{onClick:c,color:"primary",children:"Close"})]})]})},St=a(893),Bt=a(894),It=a(895),kt=a(896),Nt=a(897),Pt=a(898),At=a(923),Tt=a(38),Ut=a.n(Tt),Wt=a(39),Rt=a.n(Wt),Et=function(e){var t=e.data,a=e.searchTerm,n=e.onUpdateCustomer,c=e.onAskToDeleteCustomer,o=e.getAccountByName,s=e.getRoleByUsersId,i=Object(r.useState)(10),l=Object(S.a)(i,2),u=l[0],j=l[1],h=Object(r.useState)(0),m=Object(S.a)(h,2),p=m[0],x=m[1],O=function(e){j(e.target.value)},g=function(e,t){x(t)},f=Object(b.f)(),v=function(e){f("/customer-detail"),f("/customer-detail/".concat(e.id))},y=s(Object(d.getFirebase)().auth().currentUser.uid).usersRole;return Je(y)?Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"First name"}),Object(fe.jsx)(Nt.a,{children:"Last name"}),Object(fe.jsx)(Nt.a,{children:"Company name"}),Object(fe.jsx)(Nt.a,{children:"Email"}),Object(fe.jsx)(Nt.a,{children:"Phone number"}),Object(fe.jsx)(Nt.a,{align:"center",children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.firstName.toLowerCase().includes(a.toLowerCase())||e.lastName.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,u).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,onClick:function(){return v(e)},children:[Object(fe.jsx)(Nt.a,{children:e.firstName}),Object(fe.jsx)(Nt.a,{children:e.lastName}),Object(fe.jsx)(Nt.a,{children:o(e.accountId)}),Object(fe.jsx)(Nt.a,{children:e.email}),Object(fe.jsx)(Nt.a,{children:e.phoneNumber}),Object(fe.jsxs)(Nt.a,{align:"center",children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return c(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:g,onRowsPerPageChange:O,page:p,rowsPerPage:u})]}):Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"First name"}),Object(fe.jsx)(Nt.a,{children:"Last name"}),Object(fe.jsx)(Nt.a,{children:"Email"}),Object(fe.jsx)(Nt.a,{children:"Phone number"}),Object(fe.jsx)(Nt.a,{align:"center",children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.firstName.toLowerCase().includes(a.toLowerCase())||e.lastName.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,u).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,onClick:function(){return v(e)},children:[Object(fe.jsx)(Nt.a,{children:e.firstName}),Object(fe.jsx)(Nt.a,{children:e.lastName}),Object(fe.jsx)(Nt.a,{children:e.email}),Object(fe.jsx)(Nt.a,{children:e.phoneNumber}),Object(fe.jsxs)(Nt.a,{align:"center",children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return c(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:g,onRowsPerPageChange:O,page:p,rowsPerPage:u})]})},Ft=a(814),Dt=a(815),Lt=a(821),Mt=a(899),zt=a(253),_t=a(37),qt=a(12),Yt=Object(p.a)((function(e){return{closeIcon:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},selectLabel:{marginTop:16}}})),Ht=function(e){var t=e.showModal,a=e.selectedCustomer,r=e.closeModal,c=e.accounts,o=e.getAccountByName,s=e.getRoleByUsersId,i=Yt(),l=Object(d.useFirestore)(),j=Object(d.getFirebase)().auth().currentUser.uid,h=s(j).usersAccountId,b=Object(_t.a)({enableReinitialize:!0,initialValues:{firstName:a?a.firstName:"",lastName:a?a.lastName:"",email:a?a.email:"",accountId:h,phoneNumber:a?a.phoneNumber:""},validationSchema:qt.d().shape({firstName:qt.f().min(1).required("Please write your first name"),lastName:qt.f().min(1).required("please write your last name"),email:qt.f().min(4).required("Please write your email"),phoneNumber:qt.f().required("please write your phone number"),accountId:qt.f().required("please select company name")}),onSubmit:function(){var e=Object(w.a)(k.a.mark((function e(t,c){var o,s,i,d,j,h,m,p,x;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c.resetForm,t=Object(n.a)(Object(n.a)({},t),{},{updated:l.FieldValue.serverTimestamp()}),null===a){e.next=22;break}return e.prev=3,e.next=6,u.a.auth().currentUser.getIdToken();case 6:return s=e.sent,e.next=9,Re.patch("/adm/customer/".concat(a.id),t,{headers:{Authorization:"Bearer ".concat(s)}});case 9:i=e.sent,(d=i.status)>=200&&d<300&&(console.log(i.data),b.setSubmitting(!1),r(),o({values:""})),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(3),b.setSubmitting(!1),null!==(j=e.t0.message)&&""!==j||(j="Something went wrong. Please try again later."),console.log(j);case 20:e.next=40;break;case 22:return t=Object(n.a)(Object(n.a)({},t),{},{created:l.FieldValue.serverTimestamp(),updated:l.FieldValue.serverTimestamp()}),e.prev=23,e.next=26,u.a.auth().currentUser.getIdToken();case 26:return h=e.sent,e.next=29,Re.post("/adm/customer",t,{headers:{Authorization:"Bearer ".concat(h)}});case 29:m=e.sent,(p=m.status)>=200&&p<300&&(console.log(m.data),b.setSubmitting(!1),r(),o({values:""})),e.next=40;break;case 34:e.prev=34,e.t1=e.catch(23),b.setSubmitting(!1),null!==(x=e.t1.message)&&""!==x||(x="Something went wrong. Please try again later."),console.log(x);case 40:case"end":return e.stop()}}),e,null,[[3,14],[23,34]])})));return function(t,a){return e.apply(this,arguments)}}()}),m=s(j).usersRole;return Je(m)?Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:b.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit customer":"Add new customer"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:i.closeIcon,onClick:r,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.firstName&&b.errors.firstName),fullWidth:!0,helperText:b.touched.firstName&&b.errors.firstName,label:"First name",margin:"normal",name:"firstName",onBlur:b.handleBlur,onChange:b.handleChange,type:"text",value:b.values.firstName}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.lastName&&b.errors.lastName),fullWidth:!0,helperText:b.touched.lastName&&b.errors.lastName,label:"Last name",margin:"normal",name:"lastName",onBlur:b.handleBlur,onChange:b.handleChange,type:"text",value:b.values.lastName}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.email&&b.errors.email),fullWidth:!0,helperText:b.touched.email&&b.errors.email,label:"Email",margin:"normal",name:"email",onBlur:b.handleBlur,onChange:b.handleChange,type:"text",value:b.values.email}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.phoneNumber&&b.errors.phoneNumber),fullWidth:!0,helperText:b.touched.phoneNumber&&b.errors.phoneNumber,label:"Phone number",margin:"normal",name:"phoneNumber",onBlur:b.handleBlur,onChange:b.handleChange,type:"text",value:b.values.phoneNumber}),Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Account"}),Object(fe.jsx)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(b.touched.accountId&&b.errors.accountId),fullWidth:!0,helpertext:b.touched.accountId&&b.errors.accountId,onBlur:b.handleBlur("accountId"),onChange:b.handleChange("accountId"),value:b.values.accountId,children:c&&c.map((function(e){return Object(fe.jsx)(Mt.a,{value:e.id,children:e.companyName},e.id)}))})]}),Object(fe.jsx)(R.a,{my:2,sx:{display:"flex",justifyContent:"space-between"},children:Object(fe.jsx)(xe.a,{color:"primary",disabled:b.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add customer"})})]})})}):Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:b.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit customer":"Add new customer"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:i.closeIcon,onClick:r,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.firstName&&b.errors.firstName),fullWidth:!0,helperText:b.touched.firstName&&b.errors.firstName,label:"First name",margin:"normal",name:"firstName",onBlur:b.handleBlur,onChange:b.handleChange,type:"text",value:b.values.firstName}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.lastName&&b.errors.lastName),fullWidth:!0,helperText:b.touched.lastName&&b.errors.lastName,label:"Last name",margin:"normal",name:"lastName",onBlur:b.handleBlur,onChange:b.handleChange,type:"text",value:b.values.lastName}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.email&&b.errors.email),fullWidth:!0,helperText:b.touched.email&&b.errors.email,label:"Email",margin:"normal",name:"email",onBlur:b.handleBlur,onChange:b.handleChange,type:"text",value:b.values.email}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.phoneNumber&&b.errors.phoneNumber),fullWidth:!0,helperText:b.touched.phoneNumber&&b.errors.phoneNumber,label:"Phone number",margin:"normal",name:"phoneNumber",onBlur:b.handleBlur,onChange:b.handleChange,type:"text",value:b.values.phoneNumber}),Object(fe.jsx)(mt.a,{fullWidth:!0,variant:"outlined",label:"Account",onBlur:b.handleBlur,onChange:b.handleChange,margin:"normal",type:"text",name:"companyName",value:o(h)}),Object(fe.jsx)(R.a,{my:2,sx:{display:"flex",justifyContent:"space-between"},children:Object(fe.jsx)(xe.a,{color:"primary",disabled:b.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add customer"})})]})})})},Vt=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},searchField:{maxWidth:1e3,display:"flex",alignItems:"center"},searchButton:{marginLeft:e.spacing(2),height:36},addNewButton:{marginLeft:e.spacing(2),height:36,alignSelf:"center"},exportButton:{marginLeft:e.spacing(2),height:36,alignSelf:"center"}}})),Jt=function(){var e=Object(Oe.a)().t,t=Vt(),a=Object(r.useState)([]),n=Object(S.a)(a,2),c=n[0],o=n[1],s=Object(r.useState)(null),i=Object(S.a)(s,2),l=i[0],j=i[1],h=Object(r.useState)([]),b=Object(S.a)(h,2),m=b[0],p=b[1],x=Object(r.useState)(!1),O=Object(S.a)(x,2),g=O[0],f=O[1],v=Object(r.useState)([]),y=Object(S.a)(v,2),C=y[0],B=y[1],I=Object(r.useState)(!1),N=Object(S.a)(I,2),P=N[0],A=N[1],T=Object(r.useState)(""),U=Object(S.a)(T,2),W=U[0],E=U[1],F=Object(r.useRef)();function D(){return(D=Object(w.a)(k.a.mark((function e(){var t,a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.auth().currentUser.getIdToken();case 3:return t=e.sent,e.next=6,Re.get("/adm/customers",{headers:{Authorization:"Bearer ".concat(t)}});case 6:a=e.sent,(n=a.status)>=200&&n<300&&o(a.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function L(){return(L=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/accounts");case 3:t=e.sent,(a=t.status)>=200&&a<300&&B(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function M(){return(M=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/users");case 3:t=e.sent,(a=t.status)>=200&&a<300&&p(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){L.apply(this,arguments)}(),function(){D.apply(this,arguments)}(),function(){M.apply(this,arguments)}()}),[j,g]);var z=function(){var e=Object(w.a)(k.a.mark((function e(t,a){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),j(a),e.prev=2,e.next=5,Re.delete("/adm/customer/".concat(l.id));case 5:n=e.sent,(r=n.status)>=200&&r<300&&j(null),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:A(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}(),_=Object(ht.useReactToPrint)({content:function(){return F.current}}),q=function(e){var t=null;return C.forEach((function(a){e===a.id&&(t=a.companyName)})),t},Y=function(e){var t=null,a=null;return m.forEach((function(n){e===n.id&&(t=n.role,a=n.accountId)})),{usersRole:t,usersAccountId:a}};return Object(fe.jsx)(ut,{className:t.root,title:e("customers"),ref:F,children:Object(fe.jsxs)(ot.a,{maxWidth:!1,children:[Object(fe.jsx)("div",{children:Object(fe.jsx)(R.a,{children:Object(fe.jsx)(st.a,{children:Object(fe.jsx)(bt.a,{children:Object(fe.jsxs)(R.a,{display:"flex",justifyContent:"space-between",children:[Object(fe.jsxs)(R.a,{className:t.searchField,children:[Object(fe.jsx)(mt.a,{fullWidth:!0,InputProps:{startAdornment:Object(fe.jsx)(pt.a,{position:"start",children:Object(fe.jsx)(xt.a,{fontSize:"small",color:"action",children:Object(fe.jsx)(Ot.a,{})})})},placeholder:"Search by first or last name",variant:"outlined",onChange:function(e){E(e.target.value)}}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.searchButton,onClick:function(e){e.preventDefault(),E("")},type:"reset",children:"Search"})]}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.exportButton,onClick:_,children:"Export"}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.addNewButton,onClick:function(){j(null),f(!0)},children:"Add new customers"})]})})})})}),Object(fe.jsx)(R.a,{mt:3,children:Object(d.isLoaded)(c)?Object(fe.jsx)(Et,{data:c,searchTerm:W,onUpdateCustomer:function(e,t){e.stopPropagation(),j(t),f(!0)},onAskToDeleteCustomer:function(e,t){e.stopPropagation(),j(t),A(!0)},getAccountByName:q,getRoleByUsersId:Y}):Object(fe.jsx)(nt,{})}),Object(fe.jsx)(Ht,{showModal:g,selectedCustomer:l,accounts:C,closeModal:function(){f(!1)},getAccountByName:q,getRoleByUsersId:Y}),Object(fe.jsx)(wt,{showModal:P,title:"Delete booking?",content:"Are you sure to delete this booking?",onAccept:z,closeModal:function(){A(!1)}})]})})},Gt=a(51),Kt=a.n(Gt),$t=function(e){var t=e.data,a=e.searchTerm,n=e.onUpdateStation,c=e.onAskToDeleteStation,o=e.getRoleByUsersId,s=e.getAccountByName,i=e.getSiteByName,l=Object(r.useState)(10),u=Object(S.a)(l,2),j=u[0],h=u[1],m=Object(r.useState)(0),p=Object(S.a)(m,2),x=p[0],O=p[1],g=function(e){h(e.target.value)},f=function(e,t){O(t)},v=Object(b.f)(),y=function(e){v("/station-detail/".concat(e.id))},C=o(Object(d.getFirebase)().auth().currentUser.uid).usersRole;return Je(C)?Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Name"}),Object(fe.jsx)(Nt.a,{children:"Company Name"}),Object(fe.jsx)(Nt.a,{children:"Sity Name"}),Object(fe.jsx)(Nt.a,{children:"Status"}),Object(fe.jsx)(Nt.a,{children:"Created"}),Object(fe.jsx)(Nt.a,{align:"center",children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.name.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,j).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,onClick:function(){return y(e)},children:[Object(fe.jsx)(Nt.a,{children:e.name}),Object(fe.jsx)(Nt.a,{children:s(e.accountId)}),Object(fe.jsx)(Nt.a,{children:i(e.siteId)}),Object(fe.jsx)(Nt.a,{children:e.status}),Object(fe.jsx)(Nt.a,{children:Kt()(1e3*e.created._seconds).format("DD/MM/YYYY HH:mm")}),Object(fe.jsxs)(Nt.a,{align:"center",children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return c(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:f,onRowsPerPageChange:g,page:x,rowsPerPage:j})]}):Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Name"}),Object(fe.jsx)(Nt.a,{children:"Sity Name"}),Object(fe.jsx)(Nt.a,{children:"Status"}),Object(fe.jsx)(Nt.a,{children:"Created"}),Object(fe.jsx)(Nt.a,{align:"center",children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.name.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,j).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,onClick:function(){return y(e)},children:[Object(fe.jsx)(Nt.a,{children:e.name}),Object(fe.jsx)(Nt.a,{children:i(e.siteId)}),Object(fe.jsx)(Nt.a,{children:e.status}),Object(fe.jsx)(Nt.a,{children:Kt()(1e3*e.created._seconds).format("DD/MM/YYYY HH:mm")}),Object(fe.jsxs)(Nt.a,{align:"center",children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return c(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:f,onRowsPerPageChange:g,page:x,rowsPerPage:j})]})},Zt=a(904),Xt=Object(p.a)((function(e){return{closeIcon:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})),Qt=function(e){var t=e.showModal,a=e.selectedStation,r=e.closeModal,c=e.accounts,o=e.sites,s=e.getAccountByName,i=e.getRoleByUsersId,l=e.SiteArrByAccId,j=Xt(),h=Object(d.useFirestore)(),b=Object(d.getFirebase)().auth().currentUser.uid,m=i(b).usersAccountId,p=l(m),x=Object(_t.a)({enableReinitialize:!0,initialValues:{name:a?a.name:"",accountId:m,status:!!a&&"Active"===a.status,siteId:a?a.siteId:""},validationSchema:qt.d().shape({name:qt.f().max(255).required("Name is required"),accountId:qt.f().min(1).required("Please select a accountId"),siteId:qt.f().min(1).required("Please select a siteId"),status:qt.a()}),onSubmit:function(){var e=Object(w.a)(k.a.mark((function e(t,c){var o,s,i,l,d,j,b,m,p,O;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c.resetForm,s={name:t.name,accountId:t.accountId,siteId:t.siteId,status:t.status?"Active":"Inactive"},null===a){e.next=23;break}return s=Object(n.a)(Object(n.a)({},s),{},{updated:h.FieldValue.serverTimestamp()}),e.prev=4,e.next=7,u.a.auth().currentUser.getIdToken();case 7:return i=e.sent,e.next=10,Re.patch("/adm/station/".concat(a.id),s,{headers:{Authorization:"Bearer ".concat(i)}});case 10:l=e.sent,(d=l.status)>=200&&d<300&&(x.setSubmitting(!1),r(),o({values:""})),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(4),x.setSubmitting(!1),null!==(j=e.t0.message)&&""!==j||(j="Something went wrong. Please try again later."),console.log(j);case 21:e.next=41;break;case 23:return s=Object(n.a)(Object(n.a)({},s),{},{created:h.FieldValue.serverTimestamp(),updated:h.FieldValue.serverTimestamp()}),e.prev=24,e.next=27,u.a.auth().currentUser.getIdToken();case 27:return b=e.sent,e.next=30,Re.post("/adm/station/",s,{headers:{Authorization:"Bearer ".concat(b)}});case 30:m=e.sent,(p=m.status)>=200&&p<300&&(x.setSubmitting(!1),r(),o({values:""})),e.next=41;break;case 35:e.prev=35,e.t1=e.catch(24),x.setSubmitting(!1),null!==(O=e.t1.message)&&""!==O||(O="Something went wrong. Please try again later."),console.log(O);case 41:case"end":return e.stop()}}),e,null,[[4,15],[24,35]])})));return function(t,a){return e.apply(this,arguments)}}()}),O=i(b).usersRole;return Je(O)?Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:x.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit station":"Add new station"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:j.closeIcon,onClick:r,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(x.touched.name&&x.errors.name),fullWidth:!0,helperText:x.touched.name&&x.errors.name,label:"Name of station",margin:"normal",name:"name",onBlur:x.handleBlur("name"),onChange:x.handleChange("name"),type:"text",value:x.values.name}),Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Sites"}),Object(fe.jsx)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(x.touched.siteId&&x.errors.siteId),fullWidth:!0,helpertext:x.touched.siteId&&x.errors.siteId,onBlur:x.handleBlur("siteId"),onChange:x.handleChange("siteId"),value:x.values.siteId,children:o&&o.map((function(e){return Object(fe.jsx)(Mt.a,{value:e.id,children:e.name},e.id)}))})]}),Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Accounts"}),Object(fe.jsx)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(x.touched.accountId&&x.errors.accountId),fullWidth:!0,helpertext:x.touched.accountId&&x.errors.accountId,onBlur:x.handleBlur("accountId"),onChange:x.handleChange("accountId"),value:x.values.accountId,children:c&&c.map((function(e){return Object(fe.jsx)(Mt.a,{value:e.id,children:e.companyName},e.id)}))})]}),Object(fe.jsxs)(R.a,{alignItems:"center",display:"flex",ml:-1,children:[Object(fe.jsx)(Zt.a,{checked:x.values.status,name:"status",onChange:x.handleChange}),Object(fe.jsx)(zt.a,{color:"textSecondary",children:"Active"})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:x.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add station"})})]})})}):Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:x.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit station":"Add new station"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:j.closeIcon,onClick:r,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(x.touched.name&&x.errors.name),fullWidth:!0,helperText:x.touched.name&&x.errors.name,label:"Name of station",margin:"normal",name:"name",onBlur:x.handleBlur("name"),onChange:x.handleChange("name"),type:"text",value:x.values.name}),Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Sites"}),Object(fe.jsx)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(x.touched.siteId&&x.errors.siteId),fullWidth:!0,helpertext:x.touched.siteId&&x.errors.siteId,onBlur:x.handleBlur("siteId"),onChange:x.handleChange("siteId"),value:x.values.siteId,children:p&&p.map((function(e){return Object(fe.jsx)(Mt.a,{value:e.id,children:e.name},e.id)}))})]}),Object(fe.jsx)(mt.a,{fullWidth:!0,variant:"outlined",label:"Account",onBlur:x.handleBlur,onChange:x.handleChange,name:"companyName",margin:"normal",type:"text",value:s(m)}),Object(fe.jsxs)(R.a,{alignItems:"center",display:"flex",ml:-1,children:[Object(fe.jsx)(Zt.a,{checked:x.values.status,name:"status",onChange:x.handleChange}),Object(fe.jsx)(zt.a,{color:"textSecondary",children:"Active"})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:x.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add station"})})]})})})},ea=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},searchField:{maxWidth:1e3,display:"flex",alignItems:"center"},searchButton:{marginLeft:e.spacing(2),height:36},addNewButton:{marginLeft:e.spacing(2),height:36,alignSelf:"center"}}})),ta=function(){var e=Object(Oe.a)().t,t=ea(),a=Object(r.useState)([]),n=Object(S.a)(a,2),c=n[0],o=n[1],s=Object(r.useState)([]),i=Object(S.a)(s,2),l=i[0],j=i[1],h=Object(r.useState)([]),b=Object(S.a)(h,2),m=b[0],p=b[1],x=Object(r.useState)([]),O=Object(S.a)(x,2),g=O[0],f=O[1],v=Object(r.useState)(null),y=Object(S.a)(v,2),C=y[0],B=y[1],I=Object(r.useState)(!1),N=Object(S.a)(I,2),P=N[0],A=N[1],T=Object(r.useState)(!1),U=Object(S.a)(T,2),W=U[0],E=U[1],F=Object(r.useState)(""),D=Object(S.a)(F,2),L=D[0],M=D[1];function z(){return(z=Object(w.a)(k.a.mark((function e(){var t,a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.auth().currentUser.getIdToken();case 3:return t=e.sent,e.next=6,Re.get("/adm/stations",{headers:{Authorization:"Bearer ".concat(t)}});case 6:a=e.sent,(n=a.status)>=200&&n<300&&o(a.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function _(){return(_=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/accounts");case 3:t=e.sent,(a=t.status)>=200&&a<300&&j(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function q(){return(q=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/sites_simple");case 3:t=e.sent,(a=t.status)>=200&&a<300&&p(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Y(){return(Y=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/users");case 3:t=e.sent,(a=t.status)>=200&&a<300&&f(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){z.apply(this,arguments)}(),function(){_.apply(this,arguments)}(),function(){q.apply(this,arguments)}(),function(){Y.apply(this,arguments)}()}),[C,P]);var H=function(){var e=Object(w.a)(k.a.mark((function e(t,a){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),B(a),e.prev=2,e.next=5,Re.delete("/adm/station/".concat(C.id));case 5:n=e.sent,(r=n.status)>=200&&r<300&&(B(null),console.log("en station var deleted-StationID:",C.id)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:E(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}(),V=function(e){var t=null;return l.forEach((function(a){e===a.id&&(t=a.companyName)})),t},J=function(e){var t=null,a=null;return g.forEach((function(n){e===n.id&&(t=n.role,a=n.accountId)})),{usersRole:t,usersAccountId:a}};return Object(fe.jsx)(ut,{className:t.root,title:e("manage_stations"),children:Object(fe.jsxs)(ot.a,{maxWidth:!1,children:[Object(fe.jsxs)(R.a,{display:"flex",justifyContent:"flex-end",children:[Object(fe.jsxs)(R.a,{className:t.searchField,style:{position:"relative",marginRight:"600px"},children:[Object(fe.jsx)(mt.a,{fullWidth:!0,InputProps:{startAdornment:Object(fe.jsx)(pt.a,{position:"start",children:Object(fe.jsx)(xt.a,{fontSize:"small",color:"action",children:Object(fe.jsx)(Ot.a,{})})})},placeholder:"Search stations name",variant:"outlined",onChange:function(e){M(e.target.value)}}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.searchButton,onClick:function(e){e.preventDefault(),M("")},type:"reset",children:"Search"})]}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",onClick:function(){B(null),A(!0)},children:"Add new station"})]}),Object(fe.jsx)(R.a,{mt:3,children:Object(d.isLoaded)(c)?Object(fe.jsx)($t,{data:c,searchTerm:L,onUpdateStation:function(e,t){e.stopPropagation(),B(t),A(!0)},onAskToDeleteStation:function(e,t){e.stopPropagation(),B(t),E(!0)},getAccountByName:V,getSiteByName:function(e){var t=null;return m.forEach((function(a){e===a.id&&(t=a.name)})),t},getRoleByUsersId:J}):Object(fe.jsx)(nt,{})}),Object(fe.jsx)(Qt,{showModal:P,selectedStation:C,closeModal:function(){A(!1)},accounts:l,sites:m,getAccountByName:V,getRoleByUsersId:J,SiteArrByAccId:function(e){return m.filter((function(t){return t.accountId===e})).map((function(e){var t=e.id,a=e.accountId;return{id:t,name:e.name,accountId:a}}))}}),Object(fe.jsx)(wt,{showModal:W,title:"Delete station?",content:"Are you sure to delete this station? Station and all lockers will be deleted.",onAccept:H,closeModal:function(){E(!1)}})]})})},aa=function(e){var t=e.data,a=e.searchTerm,n=e.onUpdateUser,c=e.onAskToDeleteUser,o=e.getAccountByName,s=Object(r.useState)(10),i=Object(S.a)(s,2),l=i[0],u=i[1],d=Object(r.useState)(0),j=Object(S.a)(d,2),h=j[0],b=j[1];return Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Name"}),Object(fe.jsx)(Nt.a,{children:"Company name"}),Object(fe.jsx)(Nt.a,{children:"Email"}),Object(fe.jsx)(Nt.a,{children:"Phone number"}),Object(fe.jsx)(Nt.a,{children:"Role"}),Object(fe.jsx)(Nt.a,{align:"center",children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.name.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,l).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,children:[Object(fe.jsx)(Nt.a,{children:e.name}),Object(fe.jsx)(Nt.a,{children:o(e.accountId)}),Object(fe.jsx)(Nt.a,{children:e.email}),Object(fe.jsx)(Nt.a,{children:e.phoneNumber}),Object(fe.jsx)(Nt.a,{children:e.role}),Object(fe.jsxs)(Nt.a,{align:"center",children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return c(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:function(e,t){b(t)},onRowsPerPageChange:function(e){u(e.target.value)},page:h,rowsPerPage:l})]})},na=a(919),ra=a(905),ca=a(817),oa=Object(p.a)((function(e){return{closeIcon:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},selectLabel:{marginTop:16}}})),sa=function(e){var t=e.showModal,a=e.selectedUser,r=e.closeModal,c=e.accounts,o=oa(),i=Object(_t.a)({enableReinitialize:!0,initialValues:{name:a?a.name:"",email:a?a.email:"",accountId:a?a.accountId:"",phoneNumber:a?a.phoneNumber:"",role:a?a.role:"",password:a?a.password:"",passwordConfirmation:a?a.passwordConfirmation:"",policy:!1},validationSchema:qt.d().shape({name:qt.f().min(1).required("Please write a name"),email:qt.f().min(4).required("Please write a email"),password:qt.f().min(6).required("please write at least 6 letters for password"),passwordConfirmation:qt.f().max(255).required("Password is required").oneOf([qt.e("password")],"Passwords must match"),phoneNumber:qt.f().notRequired(),accountId:qt.f().notRequired(),role:qt.f().min(4).required("Please select a role"),policy:qt.b().oneOf([!0],"This field must be checked")}),onSubmit:function(){var e=Object(w.a)(k.a.mark((function e(t,c){var o,s,l,u,d,j,h;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c.resetForm,t=Object(n.a)({},t),null===a){e.next=19;break}return e.prev=3,e.next=6,Re.patch("/adm/user/".concat(a.id),t);case 6:s=e.sent,(l=s.status)>=200&&l<300&&(console.log(s.data),i.setSubmitting(!1),r(),o({values:""})),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(3),i.setSubmitting(!1),null!==(u=e.t0.message)&&""!==u||(u="Something went wrong. Please try again later."),console.log(u);case 17:e.next=34;break;case 19:return t=Object(n.a)({},t),e.prev=20,e.next=23,Re.post("/adm/user",t);case 23:d=e.sent,(j=d.status)>=200&&j<300&&(console.log(d.data),i.setSubmitting(!1),r(),o({values:""})),e.next=34;break;case 28:e.prev=28,e.t1=e.catch(20),i.setSubmitting(!1),null!==(h=e.t1.message)&&""!==h||(h="Something went wrong. Please try again later."),console.log(h);case 34:case"end":return e.stop()}}),e,null,[[3,11],[20,28]])})));return function(t,a){return e.apply(this,arguments)}}()});return Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:i.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit user":"Add new user"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:o.closeIcon,onClick:r,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(i.touched.name&&i.errors.name),fullWidth:!0,helperText:i.touched.name&&i.errors.name,label:"Name",margin:"normal",name:"name",onBlur:i.handleBlur,onChange:i.handleChange,type:"text",value:i.values.name}),Object(fe.jsx)(mt.a,{error:Boolean(i.touched.email&&i.errors.email),fullWidth:!0,helperText:i.touched.email&&i.errors.email,label:"Email",margin:"normal",name:"email",onBlur:i.handleBlur,onChange:i.handleChange,type:"text",value:i.values.email}),Object(fe.jsx)(mt.a,{error:Boolean(i.touched.password&&i.errors.password),fullWidth:!0,helperText:i.touched.password&&i.errors.password,label:"Password",margin:"normal",name:"password",onBlur:i.handleBlur,onChange:i.handleChange,type:"text",value:i.values.password}),Object(fe.jsx)(mt.a,{error:Boolean(i.touched.passwordConfirmation&&i.errors.passwordConfirmation),fullWidth:!0,helperText:i.touched.passwordConfirmation&&i.errors.passwordConfirmation,label:"Repeat password",margin:"normal",name:"passwordConfirmation",onBlur:i.handleBlur,onChange:i.handleChange,type:"password",value:i.values.passwordConfirmation}),Object(fe.jsx)(mt.a,{error:Boolean(i.touched.phoneNumber&&i.errors.phoneNumber),fullWidth:!0,helperText:i.touched.phoneNumber&&i.errors.phoneNumber,label:"Phone number",margin:"normal",name:"phoneNumber",onBlur:i.handleBlur,onChange:i.handleChange,type:"text",value:i.values.phoneNumber}),Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Role"}),Object(fe.jsxs)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(i.touched.role&&i.errors.role),fullWidth:!0,helpertext:i.touched.role&&i.errors.role,onBlur:i.handleBlur("role"),onChange:i.handleChange("role"),value:i.values.role,children:[Object(fe.jsx)(Mt.a,{value:"ACCOUNT_USER",children:"ACCOUNT_USER"}),Object(fe.jsx)(Mt.a,{value:"ADMIN_USER",children:"ADMIN_USER"})]})]}),Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Account"}),Object(fe.jsx)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(i.touched.accountId&&i.errors.accountId),fullWidth:!0,helpertext:i.touched.accountId&&i.errors.accountId,onBlur:i.handleBlur("accountId"),onChange:i.handleChange("accountId"),value:i.values.accountId,children:c&&c.map((function(e){return Object(fe.jsx)(Mt.a,{value:e.id,children:e.companyName},e.id)}))})]}),Object(fe.jsxs)(R.a,{alignItems:"center",display:"flex",ml:-1,children:[Object(fe.jsx)(na.a,{checked:i.values.policy,name:"policy",onChange:i.handleChange}),Object(fe.jsxs)(zt.a,{color:"textSecondary",variant:"body1",children:["I have read the"," ",Object(fe.jsx)(ra.a,{color:"primary",component:s.b,to:"#",underline:"always",variant:"h6",children:"Terms and Conditions"})]})]}),Boolean(i.touched.policy&&i.errors.policy)&&Object(fe.jsx)(ca.a,{error:!0,children:i.errors.policy}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:i.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add user"})})]})})})},ia=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},searchField:{maxWidth:1e3,display:"flex",alignItems:"center"},searchButton:{marginLeft:e.spacing(2),height:36},addNewButton:{marginLeft:e.spacing(2),height:36,alignSelf:"center"}}})),la=function(){var e=Object(Oe.a)().t,t=ia(),a=Object(r.useState)([]),n=Object(S.a)(a,2),c=n[0],o=n[1],s=Object(r.useState)(null),i=Object(S.a)(s,2),l=i[0],u=i[1],j=Object(r.useState)(!1),h=Object(S.a)(j,2),b=h[0],m=h[1],p=Object(r.useState)([]),x=Object(S.a)(p,2),O=x[0],g=x[1],f=Object(r.useState)(!1),v=Object(S.a)(f,2),y=v[0],C=v[1],B=Object(r.useState)(""),I=Object(S.a)(B,2),N=I[0],P=I[1];function A(){return(A=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/users");case 3:t=e.sent,(a=t.status)>=200&&a<300&&o(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function T(){return(T=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/accounts");case 3:t=e.sent,(a=t.status)>=200&&a<300&&g(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){T.apply(this,arguments)}(),function(){A.apply(this,arguments)}()}),[l,b]);var U=function(){var e=Object(w.a)(k.a.mark((function e(t,a){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),u(a),e.prev=2,e.next=5,Re.delete("/adm/user/".concat(l.id));case 5:n=e.sent,(r=n.status)>=200&&r<300&&u(null),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:C(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(fe.jsx)(ut,{className:t.root,title:e("users"),children:Object(fe.jsxs)(ot.a,{maxWidth:!1,children:[Object(fe.jsx)("div",{children:Object(fe.jsx)(R.a,{children:Object(fe.jsx)(st.a,{children:Object(fe.jsx)(bt.a,{children:Object(fe.jsxs)(R.a,{display:"flex",justifyContent:"space-between",children:[Object(fe.jsxs)(R.a,{className:t.searchField,children:[Object(fe.jsx)(mt.a,{fullWidth:!0,InputProps:{startAdornment:Object(fe.jsx)(pt.a,{position:"start",children:Object(fe.jsx)(xt.a,{fontSize:"small",color:"action",children:Object(fe.jsx)(Ot.a,{})})})},placeholder:"Search by users name",variant:"outlined",onChange:function(e){P(e.target.value)}}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.searchButton,onClick:function(){P("")},type:"reset",children:"Search"})]}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.addNewButton,onClick:function(){u(null),m(!0)},children:"Add new user"})]})})})})}),Object(fe.jsx)(R.a,{mt:3,children:Object(d.isLoaded)(c)?Object(fe.jsx)(aa,{searchTerm:N,data:c,onUpdateUser:function(e,t){e.stopPropagation(),u(t),m(!0)},onAskToDeleteUser:function(e,t){e.stopPropagation(),u(t),C(!0)},getAccountByName:function(e){var t=null;return O.forEach((function(a){e===a.id&&(t=a.companyName)})),t}}):Object(fe.jsx)(nt,{})}),Object(fe.jsx)(sa,{showModal:b,selectedUser:l,accounts:O,closeModal:function(){m(!1)}}),Object(fe.jsx)(wt,{showModal:y,title:"Delete booking?",content:"Are you sure to delete this booking?",onAccept:U,closeModal:function(){C(!1)}})]})})},ua=function(e){var t=e.data,a=e.searchTerm,n=e.onUpdateSite,c=e.onAskToDeleteSite,o=e.getAccountByName,s=e.getRoleByUsersId,i=Object(r.useState)(10),l=Object(S.a)(i,2),u=l[0],j=l[1],h=Object(r.useState)(0),b=Object(S.a)(h,2),m=b[0],p=b[1],x=function(e){j(e.target.value)},O=function(e,t){p(t)},g=s(Object(d.getFirebase)().auth().currentUser.uid).usersRole;return Je(g)?Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Name"}),Object(fe.jsx)(Nt.a,{children:"Company name"}),Object(fe.jsx)(Nt.a,{align:"center",children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.name.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,u).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,children:[Object(fe.jsx)(Nt.a,{children:e.name}),Object(fe.jsx)(Nt.a,{children:o(e.accountId)}),Object(fe.jsxs)(Nt.a,{align:"center",children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return c(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:O,onRowsPerPageChange:x,page:m,rowsPerPage:u})]}):Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Name"}),Object(fe.jsx)(Nt.a,{align:"center",children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.name.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,u).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,children:[Object(fe.jsx)(Nt.a,{children:e.name}),Object(fe.jsxs)(Nt.a,{align:"center",children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return c(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:O,onRowsPerPageChange:x,page:m,rowsPerPage:u})]})},da=Object(p.a)((function(e){return{closeIcon:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})),ja=function(e){var t=e.showModal,a=e.selectedSite,r=e.closeModal,c=e.accounts,o=e.getRoleByUsersId,s=e.getAccountByName,i=da(),l=Object(d.getFirebase)().auth().currentUser.uid,j=o(l).usersAccountId,h=Object(_t.a)({enableReinitialize:!0,initialValues:{name:a?a.name:"",accountId:j},validationSchema:qt.d().shape({name:qt.f().min(1).required("Please write a name"),accountId:qt.f().notRequired()}),onSubmit:function(){var e=Object(w.a)(k.a.mark((function e(t,c){var o,s,i,l,d,j,b,m,p;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c.resetForm,t=Object(n.a)({},t),null===a){e.next=22;break}return e.prev=3,e.next=6,u.a.auth().currentUser.getIdToken();case 6:return s=e.sent,e.next=9,Re.patch("/adm/site/".concat(a.id),t,{headers:{Authorization:"Bearer ".concat(s)}});case 9:i=e.sent,(l=i.status)>=200&&l<300&&(h.setSubmitting(!1),r(),o({values:""})),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(3),h.setSubmitting(!1),null!==(d=e.t0.message)&&""!==d||(d="Something went wrong. Please try again later."),console.log(d);case 20:e.next=40;break;case 22:return t=Object(n.a)({},t),e.prev=23,e.next=26,u.a.auth().currentUser.getIdToken();case 26:return j=e.sent,e.next=29,Re.post("/adm/site/",t,{headers:{Authorization:"Bearer ".concat(j)}});case 29:b=e.sent,(m=b.status)>=200&&m<300&&(h.setSubmitting(!1),r(),o({values:""})),e.next=40;break;case 34:e.prev=34,e.t1=e.catch(23),h.setSubmitting(!1),null!==(p=e.t1.message)&&""!==p||(p="Something went wrong. Please try again later."),console.log(p);case 40:case"end":return e.stop()}}),e,null,[[3,14],[23,34]])})));return function(t,a){return e.apply(this,arguments)}}()}),b=o(l).usersRole;return Je(b)?Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:h.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit site":"Add new site"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:i.closeIcon,onClick:r,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(h.touched.name&&h.errors.name),fullWidth:!0,helpertext:h.touched.name&&h.errors.name,label:"Site name",margin:"normal",name:"name",onBlur:h.handleBlur("name"),onChange:h.handleChange("name"),type:"text",value:h.values.name}),Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Accounts"}),Object(fe.jsx)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(h.touched.accountId&&h.errors.accountId),fullWidth:!0,helpertext:h.touched.accountId&&h.errors.accountId,onBlur:h.handleBlur("accountId"),onChange:h.handleChange("accountId"),value:h.values.accountId,children:c&&c.map((function(e){return Object(fe.jsx)(Mt.a,{value:e.id,children:e.companyName},e.id)}))})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:h.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add Site"})})]})})}):Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:h.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit site":"Add new site"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:i.closeIcon,onClick:r,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(h.touched.name&&h.errors.name),fullWidth:!0,helpertext:h.touched.name&&h.errors.name,label:"Site name",margin:"normal",name:"name",onBlur:h.handleBlur("name"),onChange:h.handleChange("name"),type:"text",value:h.values.name}),Object(fe.jsx)(mt.a,{fullWidth:!0,variant:"outlined",label:"Account",onBlur:h.handleBlur,onChange:h.handleChange,margin:"normal",name:"companyName",type:"text",value:s(j)}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:h.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add Site"})})]})})})},ha=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},searchField:{maxWidth:1e3,display:"flex",alignItems:"center"},searchButton:{marginLeft:e.spacing(2),height:36},addNewButton:{marginLeft:e.spacing(2),height:36,alignSelf:"center"}}})),ba=function(){var e=Object(Oe.a)().t,t=ha(),a=Object(r.useState)([]),n=Object(S.a)(a,2),c=n[0],o=n[1],s=Object(r.useState)([]),i=Object(S.a)(s,2),l=i[0],j=i[1],h=Object(r.useState)([]),b=Object(S.a)(h,2),m=b[0],p=b[1],x=Object(r.useState)(null),O=Object(S.a)(x,2),g=O[0],f=O[1],v=Object(r.useState)(!1),y=Object(S.a)(v,2),C=y[0],B=y[1],I=Object(r.useState)(!1),N=Object(S.a)(I,2),P=N[0],A=N[1],T=Object(r.useState)(""),U=Object(S.a)(T,2),W=U[0],E=U[1];function F(){return(F=Object(w.a)(k.a.mark((function e(){var t,a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.auth().currentUser.getIdToken();case 3:return t=e.sent,e.next=6,Re.get("/adm/sites",{headers:{Authorization:"Bearer ".concat(t)}});case 6:a=e.sent,(n=a.status)>=200&&n<300&&o(a.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function D(){return(D=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/accounts");case 3:t=e.sent,(a=t.status)>=200&&a<300&&j(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function L(){return(L=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/users");case 3:t=e.sent,(a=t.status)>=200&&a<300&&p(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){F.apply(this,arguments)}(),function(){D.apply(this,arguments)}(),function(){L.apply(this,arguments)}()}),[g,C]);var M=function(){var e=Object(w.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(null),B(!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(w.a)(k.a.mark((function e(t,a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),f(a),B(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_=function(){var e=Object(w.a)(k.a.mark((function e(t,a){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),f(a),e.prev=2,e.next=5,Re.delete("/adm/site/".concat(g.id));case 5:n=e.sent,(r=n.status)>=200&&r<300&&(f(null),console.log("en site var deleted-SiteID:",g.id)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:A(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}(),q=function(e){var t=null;return l.forEach((function(a){e===a.id&&(t=a.companyName)})),t},Y=function(e){var t=null,a=null;return m.forEach((function(n){e===n.id&&(t=n.role,a=n.accountId)})),{usersRole:t,usersAccountId:a}};return Object(fe.jsx)(ut,{className:t.root,title:e("sites"),children:Object(fe.jsxs)(ot.a,{maxWidth:!1,children:[Object(fe.jsx)("div",{children:Object(fe.jsx)(R.a,{children:Object(fe.jsx)(st.a,{children:Object(fe.jsx)(bt.a,{children:Object(fe.jsxs)(R.a,{display:"flex",justifyContent:"space-between",children:[Object(fe.jsxs)(R.a,{className:t.searchField,children:[Object(fe.jsx)(mt.a,{fullWidth:!0,InputProps:{startAdornment:Object(fe.jsx)(pt.a,{position:"start",children:Object(fe.jsx)(xt.a,{fontSize:"small",color:"action",children:Object(fe.jsx)(Ot.a,{})})})},placeholder:"Search sites name",variant:"outlined",onChange:function(e){E(e.target.value)}}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.searchButton,onClick:function(e){e.preventDefault(),E("")},type:"reset",children:"Search"})]}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.addNewButton,onClick:M,children:"Add new site"})]})})})})}),Object(fe.jsx)(R.a,{mt:3,children:Object(d.isLoaded)(c)?Object(fe.jsx)(ua,{searchTerm:W,data:c,getRoleByUsersId:Y,onUpdateSite:z,onAskToDeleteSite:function(e,t){e.stopPropagation(),f(t),A(!0)},getAccountByName:q}):Object(fe.jsx)(nt,{})}),Object(fe.jsx)(ja,{showModal:C,selectedSite:g,accounts:l,closeModal:function(){B(!1)},getAccountByName:q,getRoleByUsersId:Y}),Object(fe.jsx)(wt,{showModal:P,title:"Delete site?",content:"Are you sure to delete this site?",onAccept:_,closeModal:function(){A(!1)}})]})})},ma=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.default,display:"flex",height:"100%",overflow:"hidden",width:"100%"},wrapper:{display:"flex",flex:"1 1 auto",overflow:"hidden"},contentContainer:{display:"flex",flex:"1 1 auto",overflow:"hidden"},content:{flex:"1 1 auto",height:"100%",overflow:"auto"}}})),pa=function(){var e=ma(),t=Object(i.b)((function(e){return e.firebase.auth}));return console.log(t),Object(d.isLoaded)(t)?Object(d.isLoaded)(t)&&!Object(d.isEmpty)(t)?Object(fe.jsx)(b.a,{to:"/dashboard"}):Object(fe.jsx)("div",{className:e.root,children:Object(fe.jsx)("div",{className:e.wrapper,children:Object(fe.jsx)("div",{className:e.contentContainer,children:Object(fe.jsx)("div",{className:e.content,children:Object(fe.jsx)(b.b,{})})})})}):Object(fe.jsx)(nt,{})},xa=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},card:{padding:24}}})),Oa=function(){var e=Object(Oe.a)().t,t=xa(),a=Object(b.f)(),n=Object(r.useState)(""),c=Object(S.a)(n,2),o=c[0],i=c[1],l=Object(_t.a)({initialValues:{email:"",password:""},validationSchema:qt.d().shape({email:qt.f().email("Must be a valid email").max(255).required("Email is required"),password:qt.f().max(255).required("Password is required")}),onSubmit:function(e){Object(d.getFirebase)().login({email:e.email,password:e.password}).then((function(){a("/dashboard")})).catch((function(e){l.setSubmitting(!1);var t=e.message;null!==t&&""!==t||(t="Something went wrong. Please try again later."),i(t)}))}});return Object(fe.jsxs)(ut,{className:t.root,title:e("login"),children:[Object(fe.jsx)(R.a,{display:"flex",flexDirection:"column",height:"100%",children:Object(fe.jsx)(ot.a,{maxWidth:"sm",children:Object(fe.jsx)(st.a,{className:t.card,children:Object(fe.jsxs)("form",{onSubmit:l.handleSubmit,children:[Object(fe.jsx)(R.a,{children:Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:"Login"})}),Object(fe.jsx)(mt.a,{error:Boolean(l.touched.email&&l.errors.email),fullWidth:!0,helperText:l.touched.email&&l.errors.email,label:"Email Address",margin:"normal",name:"email",onBlur:l.handleBlur,onChange:l.handleChange,type:"email",value:l.values.email}),Object(fe.jsx)(mt.a,{error:Boolean(l.touched.password&&l.errors.password),fullWidth:!0,helperText:l.touched.password&&l.errors.password,label:"Password",margin:"normal",name:"password",onBlur:l.handleBlur,onChange:l.handleChange,type:"password",value:l.values.password}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:l.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Login"})}),Object(fe.jsx)(s.c,{to:"/auth/register",children:"Register"})]})})})}),o&&Object(fe.jsx)(Ye,{error:o,onClose:function(){return i("")}})]})},ga=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},card:{padding:24}}})),fa=function(){var e=Object(Oe.a)().t,t=ga(),a=Object(r.useState)(""),n=Object(S.a)(a,2),c=n[0],o=n[1],i=Object(_t.a)({initialValues:{name:"",email:"",password:"",passwordConfirmation:"",photoUrl:"",phoneNumber:"",policy:!1},validationSchema:qt.d().shape({name:qt.f().max(255).required("Name is required"),email:qt.f().email("Must be a valid email").max(255).required("Email is required"),password:qt.f().max(255).required("Password is required"),passwordConfirmation:qt.f().max(255).required("Password is required").oneOf([qt.e("password")],"Passwords must match"),policy:qt.b().oneOf([!0],"This field must be checked")}),onSubmit:function(e){var t=Object(d.getFirebase)();console.log(t),t.createUser({email:e.email,password:e.password},{email:e.email,name:e.name}).then((function(){t.updateProfile({photoUrl:e.photoUrl,password:e.password,phoneNumber:e.phoneNumber}),console.log("Register Success")})).catch((function(e){var t=e.message;null!==t&&""!==t||(t="Something went wrong. Please try again later."),o(t),i.setSubmitting(!1)}))}});return Object(fe.jsxs)(ut,{className:t.root,title:e("register"),children:[Object(fe.jsx)(R.a,{display:"flex",flexDirection:"column",height:"100%",children:Object(fe.jsx)(ot.a,{maxWidth:"sm",children:Object(fe.jsx)(st.a,{className:t.card,children:Object(fe.jsxs)("form",{onSubmit:i.handleSubmit,children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:"Register"}),Object(fe.jsx)(mt.a,{error:Boolean(i.touched.name&&i.errors.name),fullWidth:!0,helperText:i.touched.name&&i.errors.name,label:"Name",margin:"normal",name:"name",onBlur:i.handleBlur,onChange:i.handleChange,value:i.values.name}),Object(fe.jsx)(mt.a,{error:Boolean(i.touched.email&&i.errors.email),fullWidth:!0,helperText:i.touched.email&&i.errors.email,label:"Email Address",margin:"normal",name:"email",onBlur:i.handleBlur,onChange:i.handleChange,type:"email",value:i.values.email}),Object(fe.jsx)(mt.a,{error:Boolean(i.touched.password&&i.errors.password),fullWidth:!0,helperText:i.touched.password&&i.errors.password,label:"Password",margin:"normal",name:"password",onBlur:i.handleBlur,onChange:i.handleChange,type:"password",value:i.values.password}),Object(fe.jsx)(mt.a,{error:Boolean(i.touched.passwordConfirmation&&i.errors.passwordConfirmation),fullWidth:!0,helperText:i.touched.passwordConfirmation&&i.errors.passwordConfirmation,label:"Repeat password",margin:"normal",name:"passwordConfirmation",onBlur:i.handleBlur,onChange:i.handleChange,type:"password",value:i.values.passwordConfirmation}),Object(fe.jsxs)(R.a,{alignItems:"center",display:"flex",ml:-1,children:[Object(fe.jsx)(na.a,{checked:i.values.policy,name:"policy",onChange:i.handleChange}),Object(fe.jsxs)(zt.a,{color:"textSecondary",variant:"body1",children:["I have read the"," ",Object(fe.jsx)(ra.a,{color:"primary",component:s.b,to:"#",underline:"always",variant:"h6",children:"Terms and Conditions"})]})]}),Boolean(i.touched.policy&&i.errors.policy)&&Object(fe.jsx)(ca.a,{error:!0,children:i.errors.policy}),Object(fe.jsxs)(zt.a,{color:"textSecondary",variant:"body1",align:"center",children:["Have an account?"," ",Object(fe.jsx)(ra.a,{component:s.b,to:"/auth/login",variant:"h6",children:"Login"})]})]})})})}),c&&Object(fe.jsx)(Ye,{error:c,onClose:function(){return o("")}})]})},va=a.p+"static/media/404.b8d5da2b.svg",ya=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},image:{marginTop:50,display:"inline-block",maxWidth:"100%",width:560}}})),Ca=function(){var e=ya(),t=Object(Oe.a)().t;return Object(fe.jsx)(ut,{className:e.root,title:t("404"),children:Object(fe.jsx)(R.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",children:Object(fe.jsxs)(ot.a,{maxWidth:"md",children:[Object(fe.jsx)(zt.a,{align:"center",color:"textPrimary",variant:"h1",children:"404: The page you are looking for isn\u2019t here"}),Object(fe.jsx)(zt.a,{align:"center",color:"textPrimary",variant:"subtitle2",children:"You either tried some shady route or you came here by mistake. Whichever it is, try using the navigation"}),Object(fe.jsx)(R.a,{textAlign:"center",children:Object(fe.jsx)("img",{alt:"Under development",className:e.image,src:va})})]})})})},wa=function(e){var t=e.data,a=e.searchTerm,n=e.onUpdateAccount,c=e.onAskToDeleteAccount,o=Object(r.useState)(10),s=Object(S.a)(o,2),i=s[0],l=s[1],u=Object(r.useState)(0),d=Object(S.a)(u,2),j=d[0],h=d[1];return Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Company name"}),Object(fe.jsx)(Nt.a,{children:"Contact person"}),Object(fe.jsx)(Nt.a,{children:"Email"}),Object(fe.jsx)(Nt.a,{children:"Phone"}),Object(fe.jsx)(Nt.a,{children:"Type"}),Object(fe.jsx)(Nt.a,{align:"center",children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.companyName.toLowerCase().includes(a.toLowerCase())||e.contactPerson.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,i).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,children:[Object(fe.jsx)(Nt.a,{children:e.companyName}),Object(fe.jsx)(Nt.a,{children:e.contactPerson}),Object(fe.jsx)(Nt.a,{children:e.email}),Object(fe.jsx)(Nt.a,{children:e.phone}),Object(fe.jsx)(Nt.a,{children:e.type}),Object(fe.jsxs)(Nt.a,{align:"center",children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return c(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:function(e,t){h(t)},onRowsPerPageChange:function(e){l(e.target.value)},page:j,rowsPerPage:i})]})},Sa=Object(p.a)((function(e){return{closeIcon:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},selectLabel:{marginTop:16}}})),Ba=function(e){var t=e.showModal,a=e.selectedAccount,r=e.closeModal,c=Sa(),o=Object(_t.a)({enableReinitialize:!0,initialValues:{companyName:a?a.companyName:"",contactPerson:a?a.contactPerson:"",email:a?a.email:"",phone:a?a.phone:"",type:a?a.type:""},validationSchema:qt.d().shape({companyName:qt.f().min(3).required("Please write a company name"),contactPerson:qt.f().min(3).required("Please write a contact person"),email:qt.f().required("Please write an email"),phone:qt.f().notRequired(),type:qt.f().min(4).required("Please select a type")}),onSubmit:function(){var e=Object(w.a)(k.a.mark((function e(t,c){var s,i,l,u,d;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=c.resetForm,t=Object(n.a)({},t),null===a){e.next=16;break}return e.prev=3,e.next=6,Re.patch("/adm/account/".concat(a.id),t);case 6:i=e.sent,(l=i.status)>=200&&l<300&&(console.log(i.data),o.setSubmitting(!1),r(),s({values:""})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0);case 14:e.next=28;break;case 16:return t=Object(n.a)({},t),e.prev=17,e.next=20,Re.post("/adm/account/",t);case 20:u=e.sent,(d=u.status)>=200&&d<300&&(console.log("POSTED DATA:",u.data),o.setSubmitting(!1),r(),s({values:""})),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(17),console.error(e.t1);case 28:case"end":return e.stop()}}),e,null,[[3,11],[17,25]])})));return function(t,a){return e.apply(this,arguments)}}()});return Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:o.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit Account":"Add New Account"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:c.closeIcon,onClick:r,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(o.touched.companyName&&o.errors.companyName),fullWidth:!0,helperText:o.touched.companyName&&o.errors.companyName,label:"Company Name",margin:"normal",name:"companyName",onBlur:o.handleBlur,onChange:o.handleChange,type:"text",value:o.values.companyName}),Object(fe.jsx)(mt.a,{error:Boolean(o.touched.contactPerson&&o.errors.contactPerson),fullWidth:!0,helperText:o.touched.contactPerson&&o.errors.contactPerson,label:"Contact Person",margin:"normal",name:"contactPerson",onBlur:o.handleBlur,onChange:o.handleChange,type:"text",value:o.values.contactPerson}),Object(fe.jsx)(mt.a,{error:Boolean(o.touched.email&&o.errors.email),fullWidth:!0,helperText:o.touched.email&&o.errors.email,label:"Email",margin:"normal",name:"email",onBlur:o.handleBlur,onChange:o.handleChange,type:"text",value:o.values.email}),Object(fe.jsx)(mt.a,{error:Boolean(o.touched.phone&&o.errors.phone),fullWidth:!0,helperText:o.touched.phone&&o.errors.phone,label:"Phone number",margin:"normal",name:"phone",onBlur:o.handleBlur,onChange:o.handleChange,type:"text",value:o.values.phone}),Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Type"}),Object(fe.jsxs)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(o.touched.type&&o.errors.type),fullWidth:!0,helpertext:o.touched.type&&o.errors.type,onBlur:o.handleBlur("type"),onChange:o.handleChange("type"),value:o.values.type,children:[Object(fe.jsx)(Mt.a,{value:"FREE_ACCOUNT",children:"FREE_ACCOUNT"}),Object(fe.jsx)(Mt.a,{value:"BASIC_ACCOUNT",children:"BASIC_ACCOUNT"})]})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:o.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add Account"})})]})})})},Ia=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},searchField:{maxWidth:1e3,display:"flex",alignItems:"center"},searchButton:{marginLeft:e.spacing(2),height:36},addNewButton:{marginLeft:e.spacing(2),height:36,alignSelf:"center"}}})),ka=function(e){var t=e.data,a=e.searchTerm,n=e.onUpdateProduct,c=e.getRoleByUsersId,o=e.onAskToDeleteProduct,s=e.getAccountByName,i=Object(r.useState)(10),l=Object(S.a)(i,2),u=l[0],j=l[1],h=Object(r.useState)(0),b=Object(S.a)(h,2),m=b[0],p=b[1],x=function(e){j(e.target.value)},O=function(e,t){p(t)},g=c(Object(d.getFirebase)().auth().currentUser.uid).usersRole;return Je(g)?Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Product Image"}),Object(fe.jsx)(Nt.a,{children:"Company name"}),Object(fe.jsx)(Nt.a,{children:"Name"}),Object(fe.jsx)(Nt.a,{children:"Price"}),Object(fe.jsx)(Nt.a,{children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.name.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,u).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,children:[Object(fe.jsx)(Nt.a,{children:Object(fe.jsx)("img",{src:e.imageUrl,style:{width:"10rem",height:"6.25rem"},alt:"ProductImage"})}),Object(fe.jsx)(Nt.a,{children:s(e.accountId)}),Object(fe.jsx)(Nt.a,{children:e.name}),Object(fe.jsx)(Nt.a,{children:e.hourPrice}),Object(fe.jsxs)(Nt.a,{children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return o(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:O,onRowsPerPageChange:x,page:m,rowsPerPage:u})]}):Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Product Image"}),Object(fe.jsx)(Nt.a,{children:"Name"}),Object(fe.jsx)(Nt.a,{children:"Price"}),Object(fe.jsx)(Nt.a,{children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.name.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,u).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,children:[Object(fe.jsx)(Nt.a,{children:Object(fe.jsx)("img",{src:e.imageUrl,style:{width:"10rem",height:"6.25rem"},alt:"ProductImage"})}),Object(fe.jsx)(Nt.a,{children:e.name}),Object(fe.jsx)(Nt.a,{children:e.hourPrice}),Object(fe.jsxs)(Nt.a,{children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return o(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:O,onRowsPerPageChange:x,page:m,rowsPerPage:u})]})},Na=Object(p.a)((function(e){return{closeIcon:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},selectLabel:{marginTop:16}}})),Pa=function(e){var t=e.showModal,a=e.selectedProduct,r=e.closeModal,c=e.accounts,o=e.getAccountByName,s=e.getRoleByUsersId,i=Na(),l=Object(d.getFirebase)().auth().currentUser.uid,j=s(l).usersAccountId,h=Object(_t.a)({enableReinitialize:!0,initialValues:{name:a?a.name:"",hourPrice:a?a.hourPrice:"",accountId:j,imageUrl:a?a.imageUrl:"",status:!!a&&"Active"===a.status},validationSchema:qt.d().shape({name:qt.f().min(1).required("Please write a name"),hourPrice:qt.f().min(1).required("Please write a price"),accountId:qt.f().required(),imageUrl:qt.f().required(),status:qt.a()}),onSubmit:function(){var e=Object(w.a)(k.a.mark((function e(t,c){var o,s,i,l,d,j,b;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c.resetForm,t={name:t.name,hourPrice:t.hourPrice,accountId:t.accountId,imageUrl:t.imageUrl,status:t.status?"Active":"Inactive"},null===a){e.next=19;break}return e.prev=3,e.next=6,u.a.auth().currentUser.getIdToken();case 6:return s=e.sent,e.next=9,Re.patch("/adm/product/".concat(a.id),t,{headers:{Authorization:"Bearer ".concat(s)}});case 9:i=e.sent,(l=i.status)>=200&&l<300&&(console.log(i.data),h.setSubmitting(!1),r(),o({values:""})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.error(e.t0);case 17:e.next=34;break;case 19:return t=Object(n.a)({},t),e.prev=20,e.next=23,u.a.auth().currentUser.getIdToken();case 23:return d=e.sent,e.next=26,Re.post("/adm/product",t,{headers:{Authorization:"Bearer ".concat(d)}});case 26:j=e.sent,(b=j.status)>=200&&b<300&&(console.log(j.data),h.setSubmitting(!1),r(),o({values:""})),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(20),console.error(e.t1);case 34:case"end":return e.stop()}}),e,null,[[3,14],[20,31]])})));return function(t,a){return e.apply(this,arguments)}}()}),b=s(l).usersRole;return Je(b)?Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:h.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit product":"Add new product"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:i.closeIcon,onClick:r,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(h.touched.name&&h.errors.name),fullWidth:!0,helperText:h.touched.name&&h.errors.name,label:"Name",margin:"normal",name:"name",onBlur:h.handleBlur,onChange:h.handleChange,type:"text",value:h.values.name}),Object(fe.jsx)(mt.a,{error:Boolean(h.touched.hourPrice&&h.errors.hourPrice),fullWidth:!0,helperText:h.touched.hourPrice&&h.errors.hourPrice,label:"Price",margin:"normal",name:"hourPrice",onBlur:h.handleBlur,onChange:h.handleChange,type:"number",value:h.values.hourPrice}),Object(fe.jsx)(mt.a,{error:Boolean(h.touched.imageUrl&&h.errors.imageUrl),fullWidth:!0,helperText:h.touched.imageUrl&&h.errors.imageUrl,label:"Image",margin:"normal",name:"imageUrl",onBlur:h.handleBlur,onChange:h.handleChange,type:"text",value:h.values.imageUrl}),Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Accounts"}),Object(fe.jsx)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(h.touched.accountId&&h.errors.accountId),fullWidth:!0,helpertext:h.touched.accountId&&h.errors.accountId,onBlur:h.handleBlur("accountId"),onChange:h.handleChange("accountId"),value:h.values.accountId,children:c&&c.map((function(e){return Object(fe.jsx)(Mt.a,{value:e.id,children:e.companyName},e.id)}))})]}),Object(fe.jsxs)(R.a,{alignItems:"center",display:"flex",ml:-1,children:[Object(fe.jsx)(Zt.a,{checked:h.values.status,name:"status",onChange:h.handleChange}),Object(fe.jsx)(zt.a,{color:"textSecondary",children:"Active"})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:h.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add product"})})]})})}):Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:h.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit product":"Add new product"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:i.closeIcon,onClick:r,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(h.touched.name&&h.errors.name),fullWidth:!0,helperText:h.touched.name&&h.errors.name,label:"Name",margin:"normal",name:"name",onBlur:h.handleBlur,onChange:h.handleChange,type:"text",value:h.values.name}),Object(fe.jsx)(mt.a,{error:Boolean(h.touched.hourPrice&&h.errors.hourPrice),fullWidth:!0,helperText:h.touched.hourPrice&&h.errors.hourPrice,label:"Price",margin:"normal",name:"hourPrice",onBlur:h.handleBlur,onChange:h.handleChange,type:"number",value:h.values.hourPrice}),Object(fe.jsx)(mt.a,{error:Boolean(h.touched.imageUrl&&h.errors.imageUrl),fullWidth:!0,helperText:h.touched.imageUrl&&h.errors.imageUrl,label:"Image",margin:"normal",name:"imageUrl",onBlur:h.handleBlur,onChange:h.handleChange,type:"text",value:h.values.imageUrl}),Object(fe.jsx)(mt.a,{fullWidth:!0,variant:"outlined",label:"Account",onBlur:h.handleBlur,onChange:h.handleChange,margin:"normal",name:"companyName",type:"text",value:o(j)}),Object(fe.jsxs)(R.a,{alignItems:"center",display:"flex",ml:-1,children:[Object(fe.jsx)(Zt.a,{checked:h.values.status,name:"status",onChange:h.handleChange}),Object(fe.jsx)(zt.a,{color:"textSecondary",children:"Active"})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:h.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add product"})})]})})})},Aa=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},searchField:{maxWidth:1e3,display:"flex",alignItems:"center"},searchButton:{marginLeft:e.spacing(2),height:36},addNewButton:{marginLeft:e.spacing(2),height:36,alignSelf:"center"}}})),Ta=function(){var e=Object(Oe.a)().t,t=Aa(),a=Object(r.useState)([]),n=Object(S.a)(a,2),c=n[0],o=n[1],s=Object(r.useState)(null),i=Object(S.a)(s,2),l=i[0],j=i[1],h=Object(r.useState)(!1),b=Object(S.a)(h,2),m=b[0],p=b[1],x=Object(r.useState)([]),O=Object(S.a)(x,2),g=O[0],f=O[1],v=Object(r.useState)([]),y=Object(S.a)(v,2),C=y[0],B=y[1],I=Object(r.useState)(!1),N=Object(S.a)(I,2),P=N[0],A=N[1],T=Object(r.useState)(""),U=Object(S.a)(T,2),W=U[0],E=U[1];function F(){return(F=Object(w.a)(k.a.mark((function e(){var t,a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.auth().currentUser.getIdToken();case 3:return t=e.sent,e.next=6,Re.get("/adm/products",{headers:{Authorization:"Bearer ".concat(t)}});case 6:a=e.sent,(n=a.status)>=200&&n<300&&o(a.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function D(){return(D=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/accounts");case 3:t=e.sent,(a=t.status)>=200&&a<300&&f(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function L(){return(L=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/users");case 3:t=e.sent,(a=t.status)>=200&&a<300&&B(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){D.apply(this,arguments)}(),function(){F.apply(this,arguments)}(),function(){L.apply(this,arguments)}()}),[l,m]);var M=function(){var e=Object(w.a)(k.a.mark((function e(t,a){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),j(a),e.prev=2,e.next=5,Re.delete("/adm/product/".concat(l.id));case 5:n=e.sent,(r=n.status)>=200&&r<300&&j(null),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:A(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}(),z=function(e){var t=null;return g.forEach((function(a){e===a.id&&(t=a.companyName)})),t},_=function(e){var t=null,a=null;return C.forEach((function(n){e===n.id&&(t=n.role,a=n.accountId)})),{usersRole:t,usersAccountId:a}};return Object(fe.jsx)(ut,{className:t.root,title:e("products"),children:Object(fe.jsxs)(ot.a,{maxWidth:!1,children:[Object(fe.jsx)("div",{children:Object(fe.jsx)(R.a,{children:Object(fe.jsx)(st.a,{children:Object(fe.jsx)(bt.a,{children:Object(fe.jsxs)(R.a,{display:"flex",justifyContent:"space-between",children:[Object(fe.jsxs)(R.a,{className:t.searchField,children:[Object(fe.jsx)(mt.a,{fullWidth:!0,InputProps:{startAdornment:Object(fe.jsx)(pt.a,{position:"start",children:Object(fe.jsx)(xt.a,{fontSize:"small",color:"action",children:Object(fe.jsx)(Ot.a,{})})})},placeholder:"Search by products name",variant:"outlined",onChange:function(e){E(e.target.value)}}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.searchButton,onClick:function(e){e.preventDefault(),E("")},type:"reset",children:"Search"})]}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.addNewButton,onClick:function(){j(null),p(!0)},children:"Add new product"})]})})})})}),Object(fe.jsx)(R.a,{mt:3,children:Object(d.isLoaded)(c)?Object(fe.jsx)(ka,{data:c,searchTerm:W,onUpdateProduct:function(e,t){e.stopPropagation(),j(t),p(!0)},onAskToDeleteProduct:function(e,t){e.stopPropagation(),j(t),A(!0)},getAccountByName:z,getRoleByUsersId:_}):Object(fe.jsx)(nt,{})}),Object(fe.jsx)(Pa,{showModal:m,selectedProduct:l,accounts:g,closeModal:function(){p(!1)},getAccountByName:z,getRoleByUsersId:_}),Object(fe.jsx)(wt,{showModal:P,title:"Delete product?",content:"Are you sure to delete this product?",onAccept:M,closeModal:function(){A(!1)}})]})})},Ua=function(e){var t=e.data,a=e.searchTerm,n=e.onUpdateProduct,c=e.getRoleByUsersId,o=e.onAskToDeleteProduct,s=e.getAccountByName,i=e.getProductByName,l=Object(r.useState)(10),u=Object(S.a)(l,2),j=u[0],h=u[1],b=Object(r.useState)(0),m=Object(S.a)(b,2),p=m[0],x=m[1],O=function(e){h(e.target.value)},g=function(e,t){x(t)},f=c(Object(d.getFirebase)().auth().currentUser.uid).usersRole;return Je(f)?Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Product Image"}),Object(fe.jsx)(Nt.a,{children:"Name"}),Object(fe.jsx)(Nt.a,{children:"Company name"}),Object(fe.jsx)(Nt.a,{children:"Created"}),Object(fe.jsx)(Nt.a,{children:"Product Name"}),Object(fe.jsx)(Nt.a,{children:"Status"}),Object(fe.jsx)(Nt.a,{children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.name.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,j).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,children:[Object(fe.jsx)(Nt.a,{children:Object(fe.jsx)("img",{src:e.imageUrl,style:{width:"10rem",height:"6.25rem"},alt:"ProductImage"})}),Object(fe.jsx)(Nt.a,{children:e.name}),Object(fe.jsx)(Nt.a,{children:s(e.accountId)}),Object(fe.jsx)(Nt.a,{children:Kt()(1e3*e.created._seconds).format("DD/MM/YYYY HH:mm")}),Object(fe.jsx)(Nt.a,{children:i(e.productId)}),Object(fe.jsx)(Nt.a,{children:e.status}),Object(fe.jsxs)(Nt.a,{children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return o(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:g,onRowsPerPageChange:O,page:p,rowsPerPage:j})]}):Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Product Image"}),Object(fe.jsx)(Nt.a,{children:"Name"}),Object(fe.jsx)(Nt.a,{children:"Created"}),Object(fe.jsx)(Nt.a,{children:"Product Name"}),Object(fe.jsx)(Nt.a,{children:"Status"}),Object(fe.jsx)(Nt.a,{children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.name.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,j).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,children:[Object(fe.jsx)(Nt.a,{children:Object(fe.jsx)("img",{src:e.imageUrl,style:{width:"10rem",height:"6.25rem"},alt:"ProductImage"})}),Object(fe.jsx)(Nt.a,{children:e.name}),Object(fe.jsx)(Nt.a,{children:Kt()(1e3*e.created._seconds).format("DD/MM/YYYY HH:mm")}),Object(fe.jsx)(Nt.a,{children:e.status}),Object(fe.jsxs)(Nt.a,{children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return o(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:g,onRowsPerPageChange:O,page:p,rowsPerPage:j})]})},Wa=Object(p.a)((function(e){return{closeIcon:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},selectLabel:{marginTop:16}}})),Ra=function(e){var t=e.showModal,a=e.selectedProduct,r=e.closeModal,c=e.accounts,o=e.getAccountByName,s=e.products,i=e.productsArrByAccID,l=e.getRoleByUsersId,j=Wa(),h=Object(d.useFirestore)(),b=Object(d.getFirebase)().auth().currentUser.uid,m=l(b).usersAccountId,p=i(m),x=Object(_t.a)({enableReinitialize:!0,initialValues:{accountId:m,imageUrl:a?a.imageUrl:"",name:a?a.name:"",productId:a?a.productId:"",status:!!a&&"Active"===a.status},validationSchema:qt.d().shape({accountId:qt.f().required("Please select a company"),imageUrl:qt.f().notRequired(),name:qt.f().min(1).required("Please write a name"),productId:qt.f().min(1).required("Please select a product"),status:qt.a()}),onSubmit:function(){var e=Object(w.a)(k.a.mark((function e(t,c){var o,s,i,l,d,j,b;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c.resetForm,t=Object(n.a)(Object(n.a)({},t),{},{status:t.status?"Active":"Inactive",updated:h.FieldValue.serverTimestamp()}),null===a){e.next=19;break}return e.prev=3,e.next=6,u.a.auth().currentUser.getIdToken();case 6:return s=e.sent,e.next=9,Re.patch("/adm/extra-product/".concat(a.id),t,{headers:{Authorization:"Bearer ".concat(s)}});case 9:i=e.sent,(l=i.status)>=200&&l<300&&(console.log(i.data),x.setSubmitting(!1),r(),o({values:""})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.error(e.t0);case 17:e.next=34;break;case 19:return t=Object(n.a)(Object(n.a)({},t),{},{created:h.FieldValue.serverTimestamp(),updated:h.FieldValue.serverTimestamp()}),e.prev=20,e.next=23,u.a.auth().currentUser.getIdToken();case 23:return d=e.sent,e.next=26,Re.post("/adm/extra-product",t,{headers:{Authorization:"Bearer ".concat(d)}});case 26:j=e.sent,(b=j.status)>=200&&b<300&&(console.log(j.data),x.setSubmitting(!1),r(),o({values:""})),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(20),console.error(e.t1);case 34:case"end":return e.stop()}}),e,null,[[3,14],[20,31]])})));return function(t,a){return e.apply(this,arguments)}}()}),O=l(b).usersRole;return Je(O)?Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:x.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit extra product":"Add new extra product"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:j.closeIcon,onClick:r,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(x.touched.name&&x.errors.name),fullWidth:!0,helperText:x.touched.name&&x.errors.name,label:"Name",margin:"normal",name:"name",onBlur:x.handleBlur,onChange:x.handleChange,type:"text",value:x.values.name}),Object(fe.jsx)(mt.a,{error:Boolean(x.touched.imageUrl&&x.errors.imageUrl),fullWidth:!0,helperText:x.touched.imageUrl&&x.errors.imageUrl,label:"Image",margin:"normal",name:"imageUrl",onBlur:x.handleBlur,onChange:x.handleChange,type:"text",value:x.values.imageUrl}),Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Accounts"}),Object(fe.jsx)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(x.touched.accountId&&x.errors.accountId),fullWidth:!0,helpertext:x.touched.accountId&&x.errors.accountId,onBlur:x.handleBlur("accountId"),onChange:x.handleChange("accountId"),value:x.values.accountId,children:c&&c.map((function(e){return Object(fe.jsx)(Mt.a,{value:e.id,children:e.companyName},e.id)}))})]}),Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Product"}),Object(fe.jsx)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(x.touched.productId&&x.errors.productId),fullWidth:!0,helpertext:x.touched.productId&&x.errors.productId,onBlur:x.handleBlur("productId"),onChange:x.handleChange("productId"),value:x.values.productId,children:s&&s.map((function(e){return Object(fe.jsx)(Mt.a,{value:e.id,children:e.name},e.id)}))})]}),Object(fe.jsxs)(R.a,{alignItems:"center",display:"flex",ml:-1,children:[Object(fe.jsx)(Zt.a,{checked:x.values.status,name:"status",onChange:x.handleChange}),Object(fe.jsx)(zt.a,{color:"textSecondary",children:"Active"})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:x.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add extra product"})})]})})}):Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:x.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit extra product":"Add new extra product"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:j.closeIcon,onClick:r,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(x.touched.name&&x.errors.name),fullWidth:!0,helperText:x.touched.name&&x.errors.name,label:"Name",margin:"normal",name:"name",onBlur:x.handleBlur,onChange:x.handleChange,type:"text",value:x.values.name}),Object(fe.jsx)(mt.a,{error:Boolean(x.touched.imageUrl&&x.errors.imageUrl),fullWidth:!0,helperText:x.touched.imageUrl&&x.errors.imageUrl,label:"Image",margin:"normal",name:"imageUrl",onBlur:x.handleBlur,onChange:x.handleChange,type:"text",value:x.values.imageUrl}),Object(fe.jsx)(mt.a,{fullWidth:!0,variant:"outlined",label:"Account",onBlur:x.handleBlur,onChange:x.handleChange,margin:"normal",type:"text",name:"companyName",value:o(m)}),Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Product"}),Object(fe.jsx)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(x.touched.productId&&x.errors.productId),fullWidth:!0,helpertext:x.touched.productId&&x.errors.productId,onBlur:x.handleBlur("productId"),onChange:x.handleChange("productId"),value:x.values.productId,children:p&&p.map((function(e){return Object(fe.jsx)(Mt.a,{value:e.id,children:e.name},e.id)}))})]}),Object(fe.jsxs)(R.a,{alignItems:"center",display:"flex",ml:-1,children:[Object(fe.jsx)(Zt.a,{checked:x.values.status,name:"status",onChange:x.handleChange}),Object(fe.jsx)(zt.a,{color:"textSecondary",children:"Active"})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:x.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add extra product"})})]})})})},Ea=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},searchField:{maxWidth:1e3,display:"flex",alignItems:"center"},searchButton:{marginLeft:e.spacing(2),height:36},addNewButton:{marginLeft:e.spacing(2),height:36,alignSelf:"center"}}})),Fa=function(){var e=Object(Oe.a)().t,t=Ea(),a=Object(r.useState)([]),n=Object(S.a)(a,2),c=n[0],o=n[1],s=Object(r.useState)(null),i=Object(S.a)(s,2),l=i[0],j=i[1],h=Object(r.useState)(!1),b=Object(S.a)(h,2),m=b[0],p=b[1],x=Object(r.useState)([]),O=Object(S.a)(x,2),g=O[0],f=O[1],v=Object(r.useState)([]),y=Object(S.a)(v,2),C=y[0],B=y[1],I=Object(r.useState)([]),N=Object(S.a)(I,2),P=N[0],A=N[1],T=Object(r.useState)(!1),U=Object(S.a)(T,2),W=U[0],E=U[1],F=Object(r.useState)(""),D=Object(S.a)(F,2),L=D[0],M=D[1];function z(){return(z=Object(w.a)(k.a.mark((function e(){var t,a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.auth().currentUser.getIdToken();case 3:return t=e.sent,e.next=6,Re.get("/adm/extra-products",{headers:{Authorization:"Bearer ".concat(t)}});case 6:a=e.sent,(n=a.status)>=200&&n<300&&o(a.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function _(){return(_=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/products_simple");case 3:t=e.sent,(a=t.status)>=200&&a<300&&f(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function q(){return(q=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/users");case 3:t=e.sent,(a=t.status)>=200&&a<300&&A(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Y(){return(Y=Object(w.a)(k.a.mark((function e(){var t,a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.auth().currentUser.getIdToken();case 3:return t=e.sent,e.next=6,Re.get("/adm/accounts",{headers:{Authorization:"Bearer ".concat(t)}});case 6:a=e.sent,(n=a.status)>=200&&n<300&&B(a.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){z.apply(this,arguments)}(),function(){Y.apply(this,arguments)}(),function(){_.apply(this,arguments)}(),function(){q.apply(this,arguments)}()}),[l,m]);var H=function(){var e=Object(w.a)(k.a.mark((function e(t,a){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),j(a),e.prev=2,e.next=5,Re.delete("/adm/extra-product/".concat(l.id));case 5:n=e.sent,(r=n.status)>=200&&r<300&&j(null),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:E(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}(),V=function(e){var t=null;return C.forEach((function(a){e===a.id&&(t=a.companyName)})),t},J=function(e){var t=null,a=null;return P.forEach((function(n){e===n.id&&(t=n.role,a=n.accountId)})),{usersRole:t,usersAccountId:a}};return Object(fe.jsx)(ut,{className:t.root,title:e("products"),children:Object(fe.jsxs)(ot.a,{maxWidth:!1,children:[Object(fe.jsx)("div",{children:Object(fe.jsx)(R.a,{children:Object(fe.jsx)(st.a,{children:Object(fe.jsx)(bt.a,{children:Object(fe.jsxs)(R.a,{display:"flex",justifyContent:"space-between",children:[Object(fe.jsxs)(R.a,{className:t.searchField,children:[Object(fe.jsx)(mt.a,{fullWidth:!0,InputProps:{startAdornment:Object(fe.jsx)(pt.a,{position:"start",children:Object(fe.jsx)(xt.a,{fontSize:"small",color:"action",children:Object(fe.jsx)(Ot.a,{})})})},placeholder:"Search by extra-products name",variant:"outlined",onChange:function(e){M(e.target.value)}}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.searchButton,onClick:function(e){e.preventDefault(),M("")},type:"reset",children:"Search"})]}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.addNewButton,onClick:function(){j(null),p(!0)},children:"Add new extra product"})]})})})})}),Object(fe.jsx)(R.a,{mt:3,children:Object(d.isLoaded)(c)?Object(fe.jsx)(Ua,{data:c,searchTerm:L,onUpdateProduct:function(e,t){e.stopPropagation(),j(t),p(!0)},onAskToDeleteProduct:function(e,t){e.stopPropagation(),j(t),E(!0)},getAccountByName:V,getProductByName:function(e){var t=null;return g.forEach((function(a){e===a.id&&(t=a.name)})),t},getRoleByUsersId:J}):Object(fe.jsx)(nt,{})}),Object(fe.jsx)(Ra,{showModal:m,selectedProduct:l,accounts:C,products:g,closeModal:function(){p(!1)},getAccountByName:V,getRoleByUsersId:J,productsArrByAccID:function(e){return g.filter((function(t){return t.accountId===e})).map((function(e){var t=e.id,a=e.accountId;return{id:t,name:e.name,accountId:a,hourPrice:e.hourPrice,imageUrl:e.imageUrl,status:e.status}}))}}),Object(fe.jsx)(wt,{showModal:W,title:"Delete extra product?",content:"Are you sure to delete this extra product?",onAccept:H,closeModal:function(){E(!1)}})]})})},Da=function(e){var t=e.data,a=e.searchTerm,n=e.onUpdateProduct,c=e.onAskToDeleteProduct,o=e.getRoleByUsersId,s=e.getAccountByName,i=Object(r.useState)(10),l=Object(S.a)(i,2),u=l[0],j=l[1],h=Object(r.useState)(0),b=Object(S.a)(h,2),m=b[0],p=b[1],x=function(e){j(e.target.value)},O=function(e,t){p(t)},g=o(Object(d.getFirebase)().auth().currentUser.uid).usersRole;return Je(g)?Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Company name"}),Object(fe.jsx)(Nt.a,{children:"Name"}),Object(fe.jsx)(Nt.a,{children:"Created"}),Object(fe.jsx)(Nt.a,{children:"Price"}),Object(fe.jsx)(Nt.a,{children:"Status"}),Object(fe.jsx)(Nt.a,{children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.name.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,u).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,children:[Object(fe.jsx)(Nt.a,{children:s(e.accountId)}),Object(fe.jsx)(Nt.a,{children:e.name}),Object(fe.jsx)(Nt.a,{children:Kt()(1e3*e.created._seconds).format("DD/MM/YYYY HH:mm")}),Object(fe.jsx)(Nt.a,{children:e.price}),Object(fe.jsx)(Nt.a,{children:e.status}),Object(fe.jsxs)(Nt.a,{children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return c(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:O,onRowsPerPageChange:x,page:m,rowsPerPage:u})]}):Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Name"}),Object(fe.jsx)(Nt.a,{children:"Created"}),Object(fe.jsx)(Nt.a,{children:"Price"}),Object(fe.jsx)(Nt.a,{children:"Status"}),Object(fe.jsx)(Nt.a,{children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.name.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,u).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,children:[Object(fe.jsx)(Nt.a,{children:e.name}),Object(fe.jsx)(Nt.a,{children:Kt()(1e3*e.created._seconds).format("DD/MM/YYYY HH:mm")}),Object(fe.jsx)(Nt.a,{children:e.price}),Object(fe.jsx)(Nt.a,{children:e.status}),Object(fe.jsxs)(Nt.a,{children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return c(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:O,onRowsPerPageChange:x,page:m,rowsPerPage:u})]})},La=Object(p.a)((function(e){return{closeIcon:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},selectLabel:{marginTop:16}}})),Ma=function(e){var t=e.showModal,a=e.selectedProduct,r=e.closeModal,c=e.accounts,o=e.getRoleByUsersId,s=e.getAccountByName,i=La(),l=Object(d.useFirestore)(),j=Object(d.getFirebase)().auth().currentUser.uid,h=o(j).usersAccountId,b=Object(_t.a)({enableReinitialize:!0,initialValues:{accountId:h,name:a?a.name:"",price:a?a.price:"",status:!!a&&"Active"===a.status},validationSchema:qt.d().shape({accountId:qt.f().required("Please select a company"),name:qt.f().min(1).required("Please write a name"),price:qt.f().min(1).required("Please write a price"),status:qt.a()}),onSubmit:function(){var e=Object(w.a)(k.a.mark((function e(t,c){var o,s,i,d,j,h,m;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c.resetForm,t=Object(n.a)(Object(n.a)({},t),{},{status:t.status?"Active":"Inactive",updated:l.FieldValue.serverTimestamp()}),null===a){e.next=19;break}return e.prev=3,e.next=6,u.a.auth().currentUser.getIdToken();case 6:return s=e.sent,e.next=9,Re.patch("/adm/contract-product/".concat(a.id),t,{headers:{Authorization:"Bearer ".concat(s)}});case 9:i=e.sent,(d=i.status)>=200&&d<300&&(console.log(i.data),b.setSubmitting(!1),r(),o({values:""})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.error(e.t0);case 17:e.next=34;break;case 19:return t=Object(n.a)(Object(n.a)({},t),{},{created:l.FieldValue.serverTimestamp(),updated:l.FieldValue.serverTimestamp()}),e.prev=20,e.next=23,u.a.auth().currentUser.getIdToken();case 23:return j=e.sent,e.next=26,Re.post("/adm/contract-product",t,{headers:{Authorization:"Bearer ".concat(j)}});case 26:h=e.sent,(m=h.status)>=200&&m<300&&(console.log(h.data),b.setSubmitting(!1),r(),o({values:""})),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(20),console.error(e.t1);case 34:case"end":return e.stop()}}),e,null,[[3,14],[20,31]])})));return function(t,a){return e.apply(this,arguments)}}()}),m=o(j).usersRole;return Je(m)?Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:b.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit contract-product":"Add new contract-product"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:i.closeIcon,onClick:r,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.name&&b.errors.name),fullWidth:!0,helperText:b.touched.name&&b.errors.name,label:"Name",margin:"normal",name:"name",onBlur:b.handleBlur,onChange:b.handleChange,type:"text",value:b.values.name}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.price&&b.errors.price),fullWidth:!0,helperText:b.touched.price&&b.errors.price,label:"Price",margin:"normal",name:"price",onBlur:b.handleBlur,onChange:b.handleChange,type:"number",value:b.values.price}),Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Accounts"}),Object(fe.jsx)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(b.touched.accountId&&b.errors.accountId),fullWidth:!0,helpertext:b.touched.accountId&&b.errors.accountId,onBlur:b.handleBlur("accountId"),onChange:b.handleChange("accountId"),value:b.values.accountId,children:c&&c.map((function(e){return Object(fe.jsx)(Mt.a,{value:e.id,children:e.companyName},e.id)}))})]}),Object(fe.jsxs)(R.a,{alignItems:"center",display:"flex",ml:-1,children:[Object(fe.jsx)(Zt.a,{checked:b.values.status,name:"status",onChange:b.handleChange}),Object(fe.jsx)(zt.a,{color:"textSecondary",children:"Active"})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:b.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add contract product"})})]})})}):Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:b.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit contract-product":"Add new contract-product"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:i.closeIcon,onClick:r,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.name&&b.errors.name),fullWidth:!0,helperText:b.touched.name&&b.errors.name,label:"Name",margin:"normal",name:"name",onBlur:b.handleBlur,onChange:b.handleChange,type:"text",value:b.values.name}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.price&&b.errors.price),fullWidth:!0,helperText:b.touched.price&&b.errors.price,label:"Price",margin:"normal",name:"price",onBlur:b.handleBlur,onChange:b.handleChange,type:"number",value:b.values.price}),Object(fe.jsx)(mt.a,{fullWidth:!0,variant:"outlined",label:"Account",onBlur:b.handleBlur,onChange:b.handleChange,margin:"normal",type:"text",name:"companyName",value:s(h)}),Object(fe.jsxs)(R.a,{alignItems:"center",display:"flex",ml:-1,children:[Object(fe.jsx)(Zt.a,{checked:b.values.status,name:"status",onChange:b.handleChange}),Object(fe.jsx)(zt.a,{color:"textSecondary",children:"Active"})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:b.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add contract product"})})]})})})},za=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},searchField:{maxWidth:1e3,display:"flex",alignItems:"center"},searchButton:{marginLeft:e.spacing(2),height:36},addNewButton:{marginLeft:e.spacing(2),height:36,alignSelf:"center"}}})),_a=function(){var e=Object(Oe.a)().t,t=za(),a=Object(r.useState)([]),n=Object(S.a)(a,2),c=n[0],o=n[1],s=Object(r.useState)(null),i=Object(S.a)(s,2),l=i[0],j=i[1],h=Object(r.useState)(!1),b=Object(S.a)(h,2),m=b[0],p=b[1],x=Object(r.useState)([]),O=Object(S.a)(x,2),g=O[0],f=O[1],v=Object(r.useState)([]),y=Object(S.a)(v,2),C=y[0],B=y[1],I=Object(r.useState)(!1),N=Object(S.a)(I,2),P=N[0],A=N[1],T=Object(r.useState)(""),U=Object(S.a)(T,2),W=U[0],E=U[1];function F(){return(F=Object(w.a)(k.a.mark((function e(){var t,a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.auth().currentUser.getIdToken();case 3:return t=e.sent,e.next=6,Re.get("/adm/contract-products",{headers:{Authorization:"Bearer ".concat(t)}});case 6:a=e.sent,(n=a.status)>=200&&n<300&&o(a.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function D(){return(D=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/accounts");case 3:t=e.sent,(a=t.status)>=200&&a<300&&B(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function L(){return(L=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/users");case 3:t=e.sent,(a=t.status)>=200&&a<300&&f(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){D.apply(this,arguments)}(),function(){F.apply(this,arguments)}(),function(){L.apply(this,arguments)}()}),[l,m]);var M=function(){var e=Object(w.a)(k.a.mark((function e(t,a){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),j(a),e.prev=2,e.next=5,Re.delete("/adm/contract-product/".concat(l.id));case 5:n=e.sent,(r=n.status)>=200&&r<300&&j(null),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:A(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}(),z=function(e){var t=null;return C.forEach((function(a){e===a.id&&(t=a.companyName)})),t},_=function(e){var t=null,a=null;return g.forEach((function(n){e===n.id&&(t=n.role,a=n.accountId)})),{usersRole:t,usersAccountId:a}};return Object(fe.jsx)(ut,{className:t.root,title:e("contract products"),children:Object(fe.jsxs)(ot.a,{maxWidth:!1,children:[Object(fe.jsx)("div",{children:Object(fe.jsx)(R.a,{children:Object(fe.jsx)(st.a,{children:Object(fe.jsx)(bt.a,{children:Object(fe.jsxs)(R.a,{display:"flex",justifyContent:"space-between",children:[Object(fe.jsxs)(R.a,{className:t.searchField,children:[Object(fe.jsx)(mt.a,{fullWidth:!0,InputProps:{startAdornment:Object(fe.jsx)(pt.a,{position:"start",children:Object(fe.jsx)(xt.a,{fontSize:"small",color:"action",children:Object(fe.jsx)(Ot.a,{})})})},placeholder:"Search by name",variant:"outlined",onChange:function(e){E(e.target.value)}}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.searchButton,onClick:function(e){e.preventDefault(),E("")},type:"reset",children:"Search"})]}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.addNewButton,onClick:function(){j(null),p(!0)},children:"Add new contract product"})]})})})})}),Object(fe.jsx)(R.a,{mt:3,children:Object(d.isLoaded)(c)?Object(fe.jsx)(Da,{data:c,searchTerm:W,onUpdateProduct:function(e,t){e.stopPropagation(),j(t),p(!0)},onAskToDeleteProduct:function(e,t){e.stopPropagation(),j(t),A(!0)},getAccountByName:z,getRoleByUsersId:_}):Object(fe.jsx)(nt,{})}),Object(fe.jsx)(Ma,{showModal:m,selectedProduct:l,accounts:C,closeModal:function(){p(!1)},getAccountByName:z,getRoleByUsersId:_}),Object(fe.jsx)(wt,{showModal:P,title:"Delete contract product?",content:"Are you sure to delete this contract product?",onAccept:M,closeModal:function(){A(!1)}})]})})},qa=a(65),Ya=a(913),Ha=a(906),Va=a(912),Ja=Object(p.a)((function(e){return{closeIcon:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},selectLabel:{marginTop:16}}})),Ga=function(e){var t=e.showModalCommand,a=e.stationId,r=e.lockers,c=e.closeCommandModal,o=e.selectedLocker,s=Ja(),i=Object(d.useFirestore)(),l=JSON.stringify(a),u=Object(_t.a)({enableReinitialize:!0,initialValues:{lockers:"",openHour:null,endHour:null},validationSchema:qt.d().shape({lockers:qt.f().min(1).required("Please select a Locker")}),onSubmit:function(){var e=Object(w.a)(k.a.mark((function e(t,a){var r,s,d,j;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.resetForm,t=Object(n.a)({},t),null===o){e.next=20;break}return t=Object(n.a)(Object(n.a)({},t),{},{created:i.FieldValue.serverTimestamp(),updated:i.FieldValue.serverTimestamp()}),e.prev=4,e.next=7,Re.post("http://localhost:5001/stage/europe-west1/adm/station-detail/".concat(JSON.parse(l),"/").concat(o.id),t);case 7:s=e.sent,(d=s.status)>=200&&d<300&&(console.log(s.data),u.setSubmitting(!1),c(),r({values:""})),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(4),u.setSubmitting(!1),null!==(j=e.t0.message)&&""!==j||(j="Something went wrong. Please try again later."),console.log(j);case 18:e.next=21;break;case 20:console.log("errorMessage");case 21:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,a){return e.apply(this,arguments)}}()});return Object(fe.jsxs)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",fullWidth:!0,children:[u.isSubmitting&&Object(fe.jsx)(nt,{}),Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:u.handleSubmit,children:[Object(fe.jsxs)(Ha.b,{dateAdapter:Ya.a,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:o?"Edit slot":"Generate slots"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:s.closeIcon,onClick:c,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(R.a,{sx:{mt:2},children:Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Lockers"}),Object(fe.jsx)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(u.touched.lockers&&u.errors.lockers),fullWidth:!0,helpertext:u.touched.lockers&&u.errors.lockers,onBlur:u.handleBlur("lockers"),onChange:u.handleChange("lockers"),value:u.values.lockers,children:r&&r.map((function(e){return Object(fe.jsx)(Mt.a,{value:e.id,children:e.lockerNumber},e.id)}))})]})}),Object(fe.jsx)(R.a,{sx:{mt:2},children:Object(fe.jsx)(Va.a,{label:"Open Hour",value:u.values.openHour,onChange:function(e){u.setFieldValue("openHour",e)},renderInput:function(e){return Object(fe.jsx)(mt.a,Object(n.a)({},e))}})}),Object(fe.jsx)(R.a,{sx:{mt:2},children:Object(fe.jsx)(Va.a,{label:"End Hour",value:u.values.endHour,onChange:function(e){u.setFieldValue("endHour",e)},renderInput:function(e){return Object(fe.jsx)(mt.a,Object(n.a)({},e))}})})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{disabled:u.isSubmitting,color:"primary",fullWidth:!0,size:"large",type:"submit",variant:"contained",children:o?"Save":"Generate slots"})})]})})]})},Ka=Object(p.a)((function(e){return{closeIcon:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},selectLabel:{marginTop:16}}})),$a=function(e){var t=e.showModal,a=e.stationId,r=e.selectedLocker,c=e.closeModal,o=e.getStationByName,s=e.getStationByCompanyName,i=e.getProductsByStationArr,l=Ka(),u=Object(d.useFirestore)(),j=JSON.stringify(a),h=i(a),b=Object(_t.a)({enableReinitialize:!0,initialValues:{productId:r?r.productId:"",stationId:r?r.stationId:"",stationName:r?r.name:"",companyName:r?r.companyName:""},validationSchema:qt.d().shape({stationId:qt.f().min(1).notRequired(),productId:qt.f().required("Please select a Product"),stationName:qt.f().min(1).notRequired(),companyName:qt.f().min(1).notRequired()}),onSubmit:function(){var e=Object(w.a)(k.a.mark((function e(t,a){var o,s,i,l,d,h,m;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.resetForm,t=Object(n.a)({},t),null===r){e.next=19;break}return e.prev=3,e.next=6,Re.patch("http://localhost:5001/stage/europe-west1/adm/station-detail/".concat(JSON.parse(j),"/").concat(r.id),t);case 6:s=e.sent,(i=s.status)>=200&&i<300&&(console.log(s.data),b.setSubmitting(!1),c(),o({values:""})),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(3),b.setSubmitting(!1),null!==(l=e.t0.message)&&""!==l||(l="Something went wrong. Please try again later."),console.log(l);case 17:e.next=34;break;case 19:return t=Object(n.a)(Object(n.a)({},t),{},{created:u.FieldValue.serverTimestamp(),updated:u.FieldValue.serverTimestamp()}),e.prev=20,e.next=23,Re.post("http://localhost:5001/stage/europe-west1/adm/station-detail/".concat(JSON.parse(j)),t);case 23:d=e.sent,(h=d.status)>=200&&h<300&&(console.log(d.data),b.setSubmitting(!1),c(),o({values:""})),e.next=34;break;case 28:e.prev=28,e.t1=e.catch(20),b.setSubmitting(!1),null!==(m=e.t1.message)&&""!==m||(m="Something went wrong. Please try again later."),console.log(m);case 34:case"end":return e.stop()}}),e,null,[[3,11],[20,28]])})));return function(t,a){return e.apply(this,arguments)}}()});return Object(fe.jsxs)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",fullWidth:!0,children:[b.isSubmitting&&Object(fe.jsx)(nt,{}),Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:b.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:r?"Edit locker":"Add locker"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:l.closeIcon,onClick:c,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{disabled:!0,fullWidth:!0,variant:"outlined",label:"Stations Name",onBlur:b.handleBlur,onChange:b.handleChange,margin:"normal",type:"text",value:o(a)}),Object(fe.jsx)(mt.a,{disabled:!0,fullWidth:!0,variant:"outlined",label:"Companies Name",onBlur:b.handleBlur,onChange:b.handleChange,margin:"normal",type:"text",value:s(a)}),Object(fe.jsx)(zt.a,{color:"textSecondary",className:l.selectLabel,children:"Select Product"}),Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Product"}),Object(fe.jsx)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(b.touched.productId&&b.errors.productId),fullWidth:!0,helpertext:b.touched.productId&&b.errors.productId,onBlur:b.handleBlur("productId"),onChange:b.handleChange("productId"),value:b.values.productId,children:h&&h.map((function(e){return Object(fe.jsx)(Mt.a,{value:e.id,children:e.name},e.id)}))})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{disabled:b.isSubmitting,color:"primary",fullWidth:!0,size:"large",type:"submit",variant:"contained",children:r?"Save":"Add locker"})})]})})]})},Za=function(e){var t=e.data,a=e.getAccNameByProduct,n=e.onUpdateLocker,c=e.getProductByName,o=Object(r.useState)(10),s=Object(S.a)(o,2),i=s[0],l=s[1],u=Object(r.useState)(0),d=Object(S.a)(u,2),j=d[0],h=d[1];return Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Company name"}),Object(fe.jsx)(Nt.a,{children:"Locker"}),Object(fe.jsx)(Nt.a,{children:"Product Name"}),Object(fe.jsx)(Nt.a,{align:"center",children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.slice(0,i).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,children:[Object(fe.jsx)(Nt.a,{children:a(e.productId)}),Object(fe.jsx)(Nt.a,{children:e.lockerNumber}),Object(fe.jsx)(Nt.a,{children:c(e.productId)}),Object(fe.jsx)(Nt.a,{align:"center",children:Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})})})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:function(e,t){h(t)},onRowsPerPageChange:function(e){l(e.target.value)},page:j,rowsPerPage:i})]})},Xa=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},stationName:{margin:"0 !important",fontSize:"18px"},addNewButton:{height:36,alignSelf:"center"},clearSlots:{height:36,alignSelf:"center"},generateSlots:{height:36,alignSelf:"center"}}})),Qa=function(){var e=Object(Oe.a)().t,t=Xa(),a=Object(r.useState)([]),n=Object(S.a)(a,2),c=n[0],o=n[1],s=Object(r.useState)([]),i=Object(S.a)(s,2),l=i[0],u=i[1],j=Object(r.useState)(null),h=Object(S.a)(j,2),m=h[0],p=h[1],x=Object(r.useState)([]),O=Object(S.a)(x,2),g=O[0],f=O[1],v=Object(r.useState)([]),y=Object(S.a)(v,2),C=y[0],B=y[1],I=Object(r.useState)(!1),N=Object(S.a)(I,2),P=N[0],A=N[1],T=Object(r.useState)(!1),U=Object(S.a)(T,2),W=U[0],E=U[1],F=Object(b.g)().stationId,D=Object(qa.b)(),L=JSON.stringify(F);function M(){return(M=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("http://localhost:5001/stage/europe-west1/adm/station-detail/".concat(JSON.parse(L)));case 3:t=e.sent,(a=t.status)>=200&&a<300&&o(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function z(){return(z=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/stations_simple");case 3:t=e.sent,(a=t.status)>=200&&a<300&&f(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function _(){return(_=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/products_simple");case 3:t=e.sent,(a=t.status)>=200&&a<300&&u(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function q(){return(q=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/accounts");case 3:t=e.sent,(a=t.status)>=200&&a<300&&B(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){M.apply(this,arguments)}(),function(){z.apply(this,arguments)}(),function(){_.apply(this,arguments)}(),function(){q.apply(this,arguments)}()}),[m,P]);var Y=function(e){var t=null;return g.forEach((function(a){e===a.id&&(t=a.name)})),t},H=function(e){var t=null;return C.forEach((function(a){e===a.id&&(t=a.companyName)})),t};return Object(fe.jsx)(ut,{className:t.root,title:e("station_detail"),children:Object(fe.jsxs)(ot.a,{maxWidth:!1,children:[Object(fe.jsx)("div",{children:Object(fe.jsxs)(R.a,{display:"flex",justifyContent:"space-between",alignItems:"center",m:2,children:[Object(fe.jsx)(xe.a,{onClick:function(){return D.back()},children:"Go Back"}),Object(fe.jsx)(zt.a,{className:t.stationName,children:Y("".concat(JSON.parse(L)))}),Object(fe.jsx)(st.a,{children:Object(fe.jsx)(bt.a,{children:Object(fe.jsx)(R.a,{display:"flex",justifyContent:"space-between",children:Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.clearSlots,children:"Clear Slots"})})})}),Object(fe.jsx)(st.a,{children:Object(fe.jsx)(bt.a,{children:Object(fe.jsx)(R.a,{display:"flex",justifyContent:"space-between",children:Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.addNewButton,onClick:function(){p(null),A(!0)},children:"Add Locker"})})})}),Object(fe.jsx)(st.a,{children:Object(fe.jsx)(bt.a,{children:Object(fe.jsx)(R.a,{display:"flex",justifyContent:"space-between",children:Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.generateSlots,onClick:function(){p(null),E(!0)},children:"Generate Slots"})})})})]})}),Object(fe.jsx)(R.a,{mt:3,children:Object(d.isLoaded)(c)?Object(fe.jsx)(Za,{data:c,onUpdateLocker:function(e,t){e.stopPropagation(),p(t),A(!0)},getStationByName:Y,getProductByName:function(e){var t=null;return l.forEach((function(a){e===a.id&&(t=a.name)})),t},getAccNameByProduct:function(e){var t="",a="";return l.forEach((function(n){e===n.id&&(t=n.accountId,a=H(t))})),a}}):Object(fe.jsx)(nt,{})}),Object(fe.jsx)($a,{showModal:P,stationId:F,selectedLocker:m,closeModal:function(){A(!1)},getStationByName:Y,getStationByCompanyName:function(e){var t="",a="";return g.forEach((function(n){e===n.id&&(t=n.accountId,a=H(t))})),a},getProductsByStationArr:function(e){var t=null,a=null;return g.forEach((function(n){var r;e===n.id&&(t=n.accountId,r=t,a=l.filter((function(e){return e.accountId===r})).map((function(e){var t=e.id,a=e.accountId;return{id:t,name:e.name,accountId:a,hourPrice:e.hourPrice,imageUrl:e.imageUrl,status:e.status}})))})),a}}),Object(fe.jsx)(Ga,{showModalCommand:W,stationId:F,lockers:c,closeCommandModal:function(){E(!1)},selectedLocker:m})]})})},en=function(e){var t=e.data,a=e.searchTerm,n=e.onUpdateCheckoutProduct,c=e.onAskToDeleteCheckoutProduct,o=e.getAccountByName,s=e.getRoleByUsersId,i=Object(r.useState)(10),l=Object(S.a)(i,2),u=l[0],j=l[1],h=Object(r.useState)(0),b=Object(S.a)(h,2),m=b[0],p=b[1],x=function(e){j(e.target.value)},O=function(e,t){p(t)},g=s(Object(d.getFirebase)().auth().currentUser.uid).usersRole;return Je(g)?Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Image"}),Object(fe.jsx)(Nt.a,{children:"Name"}),Object(fe.jsx)(Nt.a,{children:"Company Name"}),Object(fe.jsx)(Nt.a,{children:"Price"}),Object(fe.jsx)(Nt.a,{children:"Status"}),Object(fe.jsx)(Nt.a,{children:"Created"}),Object(fe.jsx)(Nt.a,{align:"center",children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.name.toLowerCase().includes(a.toLowerCase())||e.companyName.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,u).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,children:[Object(fe.jsx)(Nt.a,{children:Object(fe.jsx)("img",{src:e.imageUrl,alt:"firebaseImg",width:"100"})}),Object(fe.jsx)(Nt.a,{children:e.name}),Object(fe.jsx)(Nt.a,{children:o(e.accountId)}),Object(fe.jsx)(Nt.a,{children:e.price}),Object(fe.jsx)(Nt.a,{children:e.status}),Object(fe.jsx)(Nt.a,{children:Kt()(1e3*e.created._seconds).format("DD/MM/YYYY HH:mm")}),Object(fe.jsxs)(Nt.a,{align:"center",children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return c(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:O,onRowsPerPageChange:x,page:m,rowsPerPage:u})]}):Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Image"}),Object(fe.jsx)(Nt.a,{children:"Name"}),Object(fe.jsx)(Nt.a,{children:"Price"}),Object(fe.jsx)(Nt.a,{children:"Status"}),Object(fe.jsx)(Nt.a,{children:"Created"}),Object(fe.jsx)(Nt.a,{align:"center",children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.name.toLowerCase().includes(a.toLowerCase())||e.companyName.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,u).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,children:[Object(fe.jsx)(Nt.a,{children:Object(fe.jsx)("img",{src:e.imageUrl,alt:"firebaseImg",width:"100"})}),Object(fe.jsx)(Nt.a,{children:e.name}),Object(fe.jsx)(Nt.a,{children:e.price}),Object(fe.jsx)(Nt.a,{children:e.status}),Object(fe.jsx)(Nt.a,{children:Kt()(1e3*e.created._seconds).format("DD/MM/YYYY HH:mm")}),Object(fe.jsxs)(Nt.a,{align:"center",children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return c(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:O,onRowsPerPageChange:x,page:m,rowsPerPage:u})]})},tn=Object(p.a)((function(e){return{closeIcon:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},selectLabel:{marginTop:16}}})),an=function(e){var t=e.showModal,a=e.selectedCheckoutProduct,r=e.closeModal,c=e.accounts,o=e.getAccountByName,s=e.getRoleByUsersId,i=tn(),l=Object(d.useFirestore)(),j=Object(d.getFirebase)().auth().currentUser.uid,h=s(j).usersAccountId,b=Object(_t.a)({enableReinitialize:!0,initialValues:{name:a?a.name:"",accountId:h,price:a?a.price:"",imageUrl:a?a.imageUrl:"",status:!!a&&"Active"===a.status},validationSchema:qt.d().shape({name:qt.f().min(1).required("Please write a name"),accountId:qt.f().min(1).required("Please select a company"),price:qt.c().min(50).required("Please put or make sure that the price is 50$ or above"),imageUrl:qt.f().notRequired("Please put a link address for your image"),status:qt.a()}),onSubmit:function(){var e=Object(w.a)(k.a.mark((function e(t){var c,o,s,i,d,j;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(n.a)(Object(n.a)({},t),{},{status:t.status?"Active":"Inactive",updated:l.FieldValue.serverTimestamp()}),null===a){e.next=18;break}return e.prev=2,e.next=5,u.a.auth().currentUser.getIdToken();case 5:return c=e.sent,e.next=8,Re.patch("/adm/checkout-product/".concat(a.id),t,{headers:{Authorization:"Bearer ".concat(c)}});case 8:o=e.sent,(s=o.status)>=200&&s<300&&(console.log(o.data),b.setSubmitting(!1),r()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0);case 16:e.next=33;break;case 18:return t=Object(n.a)(Object(n.a)({},t),{},{created:l.FieldValue.serverTimestamp(),updated:l.FieldValue.serverTimestamp()}),e.prev=19,e.next=22,u.a.auth().currentUser.getIdToken();case 22:return i=e.sent,e.next=25,Re.post("/adm/checkout-product",t,{headers:{Authorization:"Bearer ".concat(i)}});case 25:d=e.sent,(j=d.status)>=200&&j<300&&(console.log(d.data),b.setSubmitting(!1),r()),e.next=33;break;case 30:e.prev=30,e.t1=e.catch(19),console.error(e.t1);case 33:case"end":return e.stop()}}),e,null,[[2,13],[19,30]])})));return function(t){return e.apply(this,arguments)}}()}),m=s(j).usersRole;return Je(m)?Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:b.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit checkout product":"Add checkout product"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:i.closeIcon,onClick:r,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.name&&b.errors.name),fullWidth:!0,helperText:b.touched.name&&b.errors.name,label:"Name",margin:"normal",name:"name",onBlur:b.handleBlur,onChange:b.handleChange,type:"text",value:b.values.name}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.price&&b.errors.price),fullWidth:!0,helperText:b.touched.price&&b.errors.price,label:"Price",margin:"normal",name:"price",onBlur:b.handleBlur,onChange:b.handleChange,type:"number",value:b.values.price}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.imageUrl&&b.errors.imageUrl),fullWidth:!0,helperText:b.touched.imageUrl&&b.errors.imageUrl,label:"Image Url",margin:"normal",name:"imageUrl",onBlur:b.handleBlur,onChange:b.handleChange,type:"text",value:b.values.imageUrl}),Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Account"}),Object(fe.jsx)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(b.touched.accountId&&b.errors.accountId),fullWidth:!0,helpertext:b.touched.accountId&&b.errors.accountId,onBlur:b.handleBlur("accountId"),onChange:b.handleChange("accountId"),value:b.values.accountId,children:c&&c.map((function(e){return Object(fe.jsx)(Mt.a,{value:e.id,children:e.companyName},e.id)}))})]}),Object(fe.jsxs)(R.a,{alignItems:"center",display:"flex",ml:-1,mt:2,children:[Object(fe.jsx)(Zt.a,{checked:b.values.status,name:"status",onChange:b.handleChange}),Object(fe.jsx)(zt.a,{color:"textSecondary",children:"Active"})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:b.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add checkout product"})})]})})}):Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:b.handleSubmit,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit checkout product":"Add checkout product"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:i.closeIcon,onClick:r,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.name&&b.errors.name),fullWidth:!0,helperText:b.touched.name&&b.errors.name,label:"Name",margin:"normal",name:"name",onBlur:b.handleBlur,onChange:b.handleChange,type:"text",value:b.values.name}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.price&&b.errors.price),fullWidth:!0,helperText:b.touched.price&&b.errors.price,label:"Price",margin:"normal",name:"price",onBlur:b.handleBlur,onChange:b.handleChange,type:"number",value:b.values.price}),Object(fe.jsx)(mt.a,{error:Boolean(b.touched.imageUrl&&b.errors.imageUrl),fullWidth:!0,helperText:b.touched.imageUrl&&b.errors.imageUrl,label:"Image Url",margin:"normal",name:"imageUrl",onBlur:b.handleBlur,onChange:b.handleChange,type:"text",value:b.values.imageUrl}),Object(fe.jsx)(mt.a,{fullWidth:!0,variant:"outlined",label:"Account",onBlur:b.handleBlur,onChange:b.handleChange,margin:"normal",name:"companyName",type:"text",value:o(h)}),Object(fe.jsxs)(R.a,{alignItems:"center",display:"flex",ml:-1,mt:2,children:[Object(fe.jsx)(Zt.a,{checked:b.values.status,name:"status",onChange:b.handleChange}),Object(fe.jsx)(zt.a,{color:"textSecondary",children:"Active"})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:b.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add checkout product"})})]})})})},nn=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},searchField:{maxWidth:1100,display:"flex",alignItems:"center"},searchButton:{marginLeft:e.spacing(2),height:36},addNewButton:{marginLeft:e.spacing(2),height:36,alignSelf:"center"}}})),rn=function(){var e=Object(Oe.a)().t,t=nn(),a=Object(r.useState)([]),n=Object(S.a)(a,2),c=n[0],o=n[1],s=Object(r.useState)(null),i=Object(S.a)(s,2),l=i[0],j=i[1],h=Object(r.useState)(!1),b=Object(S.a)(h,2),m=b[0],p=b[1],x=Object(r.useState)([]),O=Object(S.a)(x,2),g=O[0],f=O[1],v=Object(r.useState)([]),y=Object(S.a)(v,2),C=y[0],B=y[1],I=Object(r.useState)(!1),N=Object(S.a)(I,2),P=N[0],A=N[1],T=Object(r.useState)(""),U=Object(S.a)(T,2),W=U[0],E=U[1];function F(){return(F=Object(w.a)(k.a.mark((function e(){var t,a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.auth().currentUser.getIdToken();case 3:return t=e.sent,e.next=6,Re.get("/adm/checkout-products",{headers:{Authorization:"Bearer ".concat(t)}});case 6:a=e.sent,(n=a.status)>=200&&n<300&&o(a.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function D(){return(D=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/accounts");case 3:t=e.sent,(a=t.status)>=200&&a<300&&f(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function L(){return(L=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/users");case 3:t=e.sent,(a=t.status)>=200&&a<300&&B(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){D.apply(this,arguments)}(),function(){F.apply(this,arguments)}(),function(){L.apply(this,arguments)}()}),[l,m]);var M=function(){var e=Object(w.a)(k.a.mark((function e(t,a){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),j(a),e.prev=2,e.next=5,Re.delete("/adm/checkout-product/".concat(l.id));case 5:n=e.sent,(r=n.status)>=200&&r<300&&j(null),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:A(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}(),z=function(e){var t=null;return g.forEach((function(a){e===a.id&&(t=a.companyName)})),t},_=function(e){var t=null,a=null;return C.forEach((function(n){e===n.id&&(t=n.role,a=n.accountId)})),{usersRole:t,usersAccountId:a}};return Object(fe.jsx)(ut,{className:t.root,title:e("checkout-products"),children:Object(fe.jsxs)(ot.a,{maxWidth:!1,children:[Object(fe.jsx)("div",{children:Object(fe.jsx)(R.a,{children:Object(fe.jsx)(st.a,{children:Object(fe.jsx)(bt.a,{children:Object(fe.jsxs)(R.a,{display:"flex",justifyContent:"space-between",children:[Object(fe.jsxs)(R.a,{className:t.searchField,children:[Object(fe.jsx)(mt.a,{fullWidth:!0,InputProps:{startAdornment:Object(fe.jsx)(pt.a,{position:"start",children:Object(fe.jsx)(xt.a,{fontSize:"small",color:"action",children:Object(fe.jsx)(Ot.a,{})})})},placeholder:"Search by name or companys name",variant:"outlined",onChange:function(e){E(e.target.value)}}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.searchButton,onClick:function(e){e.preventDefault(),E("")},type:"reset",children:"Search"})]}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.addNewButton,onClick:function(){j(null),p(!0)},children:"Add checkout product"})]})})})})}),Object(fe.jsx)(R.a,{mt:3,children:Object(d.isLoaded)(c)?Object(fe.jsx)(en,{searchTerm:W,getRoleByUsersId:_,data:c,onUpdateCheckoutProduct:function(e,t){e.stopPropagation(),j(t),p(!0)},onAskToDeleteCheckoutProduct:function(e,t){e.stopPropagation(),j(t),A(!0)},getAccountByName:z}):Object(fe.jsx)(nt,{})}),Object(fe.jsx)(an,{showModal:m,selectedCheckoutProduct:l,accounts:g,closeModal:function(){p(!1)},getAccountByName:z,getRoleByUsersId:_}),Object(fe.jsx)(wt,{showModal:P,title:"Delete checkout product?",content:"Are you sure to delete this checkout product?",onAccept:M,closeModal:function(){A(!1)}})]})})},cn=a(924),on=a(170),sn=a(907),ln=a(909),un=a(915),dn=Object(p.a)((function(e){return{closeIcon:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},selectLabel:{marginTop:16},circle:{borderRadius:"50%"}}})),jn=function(e){var t=e.getRoleByUsersId,a=e.getAccountByName,n=dn(),c=Object(r.useState)(""),o=Object(S.a)(c,2),s=o[0],i=o[1],l=Object(r.useState)(!1),u=Object(S.a)(l,2),j=u[0],h=u[1],b=Object(r.useState)(!1),m=Object(S.a)(b,2),p=m[0],x=m[1],O=Object(d.getFirebase)().auth().currentUser.uid,g=t(O).usersPhoneNumber,f=t(O).usersName,v=t(O).usersPassword,y=t(O).usersEmail,C=t(O).usersAccountId,B=a(C).accountName,I=Object(_t.a)({enableReinitialize:!0,initialValues:{name:f,phoneNumber:g,password:v,passwordConfirmation:v,email:y,companyName:B,accountId:C},validationSchema:qt.d().shape({name:qt.f().min(1).required("Name should not be empty"),phoneNumber:qt.f().required("Phone should not be empty"),password:qt.f().max(255).required("Password should not be empty"),passwordConfirmation:qt.f().max(255).required("Password should not be empty").oneOf([qt.e("password")],"Passwords must match"),email:qt.f().min(1).required("Email should not be empty"),accountId:qt.f().notRequired()}),onSubmit:function(){var e=Object(w.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(d.getFirebase)(),console.log(a.auth().currentUser),a.auth().currentUser.updatePassword(I.values.password).then((function(){a.updateProfile({name:t.name,password:t.password,phoneNumber:t.phoneNumber}),h(!0)})).catch((function(e){var t=e.message;null!==t&&""!==t||(t="Something went wrong. Please try again later."),i(t),x(!0),I.setSubmitting(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return console.log(s),Object(fe.jsxs)(st.a,{style:{padding:24},children:[j?Object(fe.jsx)(un.a,{sx:{marginBottom:2},severity:"success",children:"Success \u2014 Your profile informations has been updated!"}):Object(fe.jsx)(fe.Fragment,{}),p?Object(fe.jsx)(un.a,{sx:{marginBottom:2},severity:"error",children:"Something went wrong \u2014 Please relog and try again!"}):Object(fe.jsx)(fe.Fragment,{}),Object(fe.jsx)("form",{onSubmit:I.handleSubmit,children:Object(fe.jsxs)(R.a,{sx:{display:"flex"},children:[Object(fe.jsx)(R.a,{children:Object(fe.jsx)(L.a,{"aria-label":"close",className:n.closeIcon,children:Object(fe.jsx)(ze.a,{})})}),Object(fe.jsxs)(R.a,{sx:{marginRight:30},children:[Object(fe.jsx)(R.a,{sx:{display:"flex",justifyContent:"center"},children:Object(fe.jsx)(ke.a,{email:I.values.email,size:200,className:n.circle})}),Object(fe.jsx)(R.a,{sx:{mt:1},children:Object(fe.jsx)("a",{href:"https://wordpress.com/start/wpcc/oauth2-user?ref=oauth2&oauth2_redirect=https%3A%2F%2Fpublic-api.wordpress.com%2Foauth2%2Fauthorize%2F%3Fclient_id%3D1854%26response_type%3Dcode%26blog_id%3D0%26state%3D4f039c7b52b8dfcb409836bf6a21d3ca8b652015b170bb1941f029db7afcb8c4%26redirect_uri%3Dhttps%253A%252F%252Fen.gravatar.com%252Fconnect%252F%253Faction%253Drequest_access_token%26jetpack-code%26jetpack-user-id%3D0%26action%3Doauth2-login&oauth2_client_id=1854",target:"_blank",rel:"noopener noreferrer",children:Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",component:"label",children:"Update profile picture"})})})]}),Object(fe.jsxs)(R.a,{sx:{display:"flex",flexDirection:"column",width:"70%"},children:[Object(fe.jsx)(mt.a,{variant:"outlined",error:Boolean(I.touched.name&&I.errors.name),helperText:I.touched.name&&I.errors.name,margin:"normal",name:"name",onBlur:I.handleBlur,onChange:I.handleChange,type:"text",value:I.values.name}),Object(fe.jsx)(mt.a,{disabled:!0,variant:"outlined",margin:"normal",name:"email",type:"text",value:I.values.email}),Object(fe.jsx)(mt.a,{variant:"outlined",margin:"normal",name:"phoneNumber",onBlur:I.handleBlur,onChange:I.handleChange,type:"text",value:I.values.phoneNumber}),Object(fe.jsxs)(R.a,{sx:{display:"flex",flexDirection:"column",width:"25ch"},children:[Object(fe.jsx)(mt.a,{error:Boolean(I.touched.password&&I.errors.password),helperText:I.touched.password&&I.errors.password,variant:"outlined",margin:"normal",name:"password",onBlur:I.handleBlur,onChange:I.handleChange,type:"password",value:I.values.password}),Object(fe.jsx)(mt.a,{error:Boolean(I.touched.passwordConfirmation&&I.errors.passwordConfirmation),helperText:I.touched.passwordConfirmation&&I.errors.passwordConfirmation,variant:"outlined",margin:"normal",name:"passwordConfirmation",onBlur:I.handleBlur,onChange:I.handleChange,type:"password",value:I.values.passwordConfirmation})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:I.isSubmitting,size:"large",type:"submit",variant:"contained",children:"Save Changes"})})]})]})})]})},hn=Object(p.a)((function(e){return{closeIcon:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},selectLabel:{marginTop:16},circle:{borderRadius:"50%"}}})),bn=function(e){var t=e.getAccountByName,a=e.getRoleByUsersId,c=hn(),o=Object(r.useState)(""),s=Object(S.a)(o,2),i=s[0],l=s[1],u=Object(r.useState)(!1),j=Object(S.a)(u,2),h=j[0],b=j[1],m=Object(r.useState)(!1),p=Object(S.a)(m,2),x=p[0],O=p[1],g=Object(d.getFirebase)().auth().currentUser.uid,f=a(g).usersRole,v=a(g).usersAccountId,y=t(v).accountContactPerson,C=a(g).usersEmail,B=a(g).usersPhoneNumber,I=t(v).accountType,N=t(v).accountName,P=Object(_t.a)({enableReinitialize:!0,initialValues:{companyName:N,contactPerson:y,email:C,phone:B,accountId:v,type:I},validationSchema:qt.d().shape({accountId:qt.f().min(1).notRequired(),companyName:qt.f().min(1).required("Company name should not be empty"),contactPerson:qt.f().min(1).required("Contact person should not be empty"),email:qt.f().min(1).required("Email should not be empty"),phone:qt.f().notRequired(),type:qt.f().notRequired()}),onSubmit:function(){var e=Object(w.a)(k.a.mark((function e(t){var a,r,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(n.a)({},t),e.prev=1,e.next=4,Re.patch("/adm/account/".concat(v),t);case 4:a=e.sent,(r=a.status)>=200&&r<300&&(P.setSubmitting(!1),b(!0)),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(1),null!==(c=e.t0.message)&&""!==c||(c="Something went wrong. Please try again later."),l(c),O(!0);case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()});return console.log(i),Je(f)?Object(fe.jsxs)(st.a,{style:{padding:24},children:[h?Object(fe.jsx)(un.a,{sx:{marginBottom:2},severity:"success",children:"Success \u2014 Your profile informations has been updated!"}):Object(fe.jsx)(fe.Fragment,{}),x?Object(fe.jsx)(un.a,{sx:{marginBottom:2},severity:"error",children:"Something went wrong \u2014 Please relog and try again!"}):Object(fe.jsx)(fe.Fragment,{}),Object(fe.jsx)("form",{onSubmit:P.handleSubmit,children:Object(fe.jsxs)(R.a,{sx:{display:"flex"},children:[Object(fe.jsx)(R.a,{children:Object(fe.jsx)(L.a,{"aria-label":"close",className:c.closeIcon,children:Object(fe.jsx)(ze.a,{})})}),Object(fe.jsxs)(R.a,{sx:{display:"flex",flexDirection:"column",width:"70%"},children:[Object(fe.jsx)(mt.a,{error:Boolean(P.touched.contactPerson&&P.errors.contactPerson),helperText:P.touched.contactPerson&&P.errors.contactPerson,margin:"normal",name:"contactPerson",onBlur:P.handleBlur,onChange:P.handleChange,type:"text",value:P.values.contactPerson}),Object(fe.jsx)(mt.a,{error:Boolean(P.touched.email&&P.errors.email),helperText:P.touched.email&&P.errors.email,margin:"normal",name:"email",onBlur:P.handleBlur,onChange:P.handleChange,type:"email",value:P.values.email}),Object(fe.jsx)(mt.a,{error:Boolean(P.touched.phone&&P.errors.phone),helperText:P.touched.phone&&P.errors.phone,margin:"normal",name:"phone",onBlur:P.handleBlur,onChange:P.handleChange,type:"phone",value:P.values.phone}),Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Type"}),Object(fe.jsxs)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(P.touched.type&&P.errors.type),fullWidth:!0,helpertext:P.touched.type&&P.errors.type,onBlur:P.handleBlur("type"),onChange:P.handleChange("type"),value:P.values.type,children:[Object(fe.jsx)(Mt.a,{value:"FREE_ACCOUNT",children:"FREE_ACCOUNT"}),Object(fe.jsx)(Mt.a,{value:"BASIC_ACCOUNT",children:"BASIC_ACCOUNT"})]})]}),Object(fe.jsx)(mt.a,{fullWidth:!0,variant:"outlined",onBlur:P.handleBlur,onChange:P.handleChange,margin:"normal",type:"text",name:"companyName",value:P.values.companyName}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:P.isSubmitting,size:"large",type:"submit",variant:"contained",children:"Save Changes"})})]})]})})]}):Object(fe.jsxs)(st.a,{style:{padding:24},children:[h?Object(fe.jsx)(un.a,{sx:{marginBottom:2},severity:"success",children:"Success \u2014 Your profile informations has been updated!"}):Object(fe.jsx)(fe.Fragment,{}),x?Object(fe.jsx)(un.a,{sx:{marginBottom:2},severity:"error",children:"Something went wrong \u2014 Please relog and try again!"}):Object(fe.jsx)(fe.Fragment,{}),Object(fe.jsx)("form",{onSubmit:P.handleSubmit,children:Object(fe.jsxs)(R.a,{sx:{display:"flex"},children:[Object(fe.jsx)(R.a,{children:Object(fe.jsx)(L.a,{"aria-label":"close",className:c.closeIcon,children:Object(fe.jsx)(ze.a,{})})}),Object(fe.jsxs)(R.a,{sx:{display:"flex",flexDirection:"column",width:"70%"},children:[Object(fe.jsx)(mt.a,{variant:"outlined",error:Boolean(P.touched.contactPerson&&P.errors.contactPerson),helperText:P.touched.contactPerson&&P.errors.contactPerson,margin:"normal",name:"contactPerson",onBlur:P.handleBlur,onChange:P.handleChange,type:"text",value:P.values.contactPerson}),Object(fe.jsx)(mt.a,{fullWidth:!0,disabled:!0,variant:"outlined",onBlur:P.handleBlur,onChange:P.handleChange,margin:"normal",type:"text",name:"email",value:P.values.email}),Object(fe.jsx)(mt.a,{fullWidth:!0,variant:"outlined",onBlur:P.handleBlur,onChange:P.handleChange,margin:"normal",type:"text",name:"phone",value:P.values.phone}),Object(fe.jsx)(mt.a,{fullWidth:!0,variant:"outlined",onBlur:P.handleBlur,onChange:P.handleChange,margin:"normal",type:"text",name:"type",value:P.values.type}),Object(fe.jsx)(mt.a,{fullWidth:!0,variant:"outlined",onBlur:P.handleBlur,onChange:P.handleChange,margin:"normal",type:"text",name:"companyName",value:P.values.companyName}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:P.isSubmitting,size:"large",type:"submit",variant:"contained",children:"Save Changes"})})]})]})})]})},mn=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},searchField:{maxWidth:1e3,display:"flex",alignItems:"center"},searchButton:{marginLeft:e.spacing(2),height:36},addNewButton:{marginLeft:e.spacing(2),height:36,alignSelf:"center"}}})),pn=function(){var e=Object(Oe.a)().t,t=mn(),a=Object(r.useState)("1"),n=Object(S.a)(a,2),c=n[0],o=n[1],s=Object(r.useState)([]),i=Object(S.a)(s,2),l=i[0],u=i[1],d=Object(r.useState)([]),j=Object(S.a)(d,2),h=j[0],b=j[1];function m(){return(m=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/accounts");case 3:t=e.sent,(a=t.status)>=200&&a<300&&b(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function p(){return(p=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/users");case 3:t=e.sent,(a=t.status)>=200&&a<300&&u(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){m.apply(this,arguments)}(),function(){p.apply(this,arguments)}()}),[]);var x=function(e){var t=null,a=null,n=null;return h.forEach((function(r){e===r.id&&(t=r.companyName,a=r.type,n=r.contactPerson)})),{accountName:t,accountType:a,accountContactPerson:n}},O=function(e){var t=null,a=null,n=null,r=null,c=null,o=null;return l.forEach((function(s){e===s.id&&(t=s.role,a=s.accountId,n=s.email,r=s.name,c=s.phoneNumber,o=s.password)})),{usersRole:t,usersAccountId:a,usersEmail:n,usersName:r,usersPhoneNumber:c,usersPassword:o}};return Object(fe.jsx)(ut,{className:t.root,title:e("Profile page"),children:Object(fe.jsx)(ot.a,{maxWidth:!1,children:Object(fe.jsx)(st.a,{children:Object(fe.jsx)(R.a,{sx:{width:"100%",typography:"body1"},children:Object(fe.jsxs)(on.a,{value:c,children:[Object(fe.jsx)(R.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(fe.jsxs)(sn.a,{onChange:function(e,t){o(t)},"aria-label":"lab API tabs example",centered:!0,children:[Object(fe.jsx)(cn.a,{label:"Profile & Password",value:"1"}),Object(fe.jsx)(cn.a,{label:"Account info",value:"2"})]})}),Object(fe.jsx)(ln.a,{value:"1",children:Object(fe.jsx)(jn,{accounts:h,getRoleByUsersId:O,getAccountByName:x})}),Object(fe.jsx)(ln.a,{value:"2",children:Object(fe.jsx)(bn,{getAccountByName:x,getRoleByUsersId:O})})]})})})})})},xn=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},customerName:{margin:"0 !important",fontSize:"18px"},customerDetails:{margin:"0 !important",fontSize:18,fontWeight:"bold",height:"22vh",display:"flex",flexWrap:"wrap",flexDirection:"column"},back:{width:100,height:50,marginRight:100},edit:{height:36,width:100,alignSelf:"center"},grey:{backgroundColor:"#7C7C7C"},border:{border:"1px solid #000000",textAlign:"center"}}})),On=function(e){var t=e.getCustomerByName,a=e.getCustomerByLastName,n=e.getCustomerByNumber,r=e.getCustomerByEmail,c=xn(),o=Object(b.g)().customerId,s=JSON.stringify(o);return Object(fe.jsx)(st.a,{children:Object(fe.jsxs)(R.a,{m:2,children:[Object(fe.jsxs)(R.a,{className:c.customerDetails,children:[Object(fe.jsx)(zt.a,{clone:!0,style:{marginBottom:"5px",fontWeight:"bold"},children:"Customer Number: 13337777"}),Object(fe.jsx)(zt.a,{clone:!0,style:{marginBottom:"5px",fontWeight:"bold"},children:"Name:\n                ".concat(t("".concat(JSON.parse(s))),"\n                ").concat(a("".concat(JSON.parse(s))),"\n          ")}),Object(fe.jsx)(zt.a,{clone:!0,style:{marginBottom:"5px",fontWeight:"bold"},children:"Email:\n          ".concat(r("".concat(JSON.parse(s))),"\n        ")}),Object(fe.jsx)(zt.a,{clone:!0,style:{marginBottom:"5px",fontWeight:"bold"},children:"Phone:\n                ".concat(n("".concat(JSON.parse(s))),"\n          ")}),Object(fe.jsx)(zt.a,{clone:!0,style:{marginBottom:"5px",fontWeight:"bold"},children:"Adress: Example adress 12"}),Object(fe.jsx)(zt.a,{clone:!0,style:{marginBottom:"5px",fontWeight:"bold"},children:"City: Example city"}),Object(fe.jsx)(zt.a,{clone:!0,style:{marginBottom:"5px",fontWeight:"bold"},children:"Zip code: 371 30"})]}),Object(fe.jsx)(R.a,{fontWeight:"bold",fontSize:"larger",children:"Order History:"}),Object(fe.jsx)(St.a,{clone:!0,style:{width:"60rem",fontWeight:"bold"},children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{className:c.border,clone:!0,style:{width:"10rem",fontWeight:"bold"},children:"Order num"}),Object(fe.jsx)(Nt.a,{className:c.border,clone:!0,style:{width:"10rem",fontWeight:"bold"},children:"Booking start date"}),Object(fe.jsx)(Nt.a,{className:c.border,clone:!0,style:{width:"10rem",fontWeight:"bold"},children:"Booking end date"}),Object(fe.jsx)(Nt.a,{className:c.border,clone:!0,style:{width:"10rem",fontWeight:"bold"},children:"Channel"}),Object(fe.jsx)(Nt.a,{className:c.border,clone:!0,style:{width:"10rem",fontWeight:"bold"},children:"Payment"}),Object(fe.jsx)(Nt.a,{className:c.border,clone:!0,style:{width:"10rem",fontWeight:"bold"},children:"Value"})]})}),Object(fe.jsxs)(Pt.a,{children:[Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{className:c.border,children:"10001"}),Object(fe.jsx)(Nt.a,{className:c.border,children:"2021-08-22 10.00"}),Object(fe.jsx)(Nt.a,{className:c.border,children:"2021-08-22 15.00"}),Object(fe.jsx)(Nt.a,{className:c.border,children:"GL AB"}),Object(fe.jsx)(Nt.a,{className:c.border,clone:!0,style:{backgroundColor:"#94FF7E"},children:"swish"}),Object(fe.jsx)(Nt.a,{className:c.border,children:"750:-"})]}),Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{className:c.border,children:"10002"}),Object(fe.jsx)(Nt.a,{className:c.border,children:"2021-09-12 12.00"}),Object(fe.jsx)(Nt.a,{className:c.border,children:"2021-09-12 15.00"}),Object(fe.jsx)(Nt.a,{className:c.border,children:"Manual"}),Object(fe.jsx)(Nt.a,{className:c.border,clone:!0,style:{backgroundColor:"#F6FF7E"},children:"manual invoice"}),Object(fe.jsx)(Nt.a,{className:c.border,children:"880:-"})]})]})]})})]})})},gn=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},customerName:{margin:"0 !important",fontSize:"18px"},customerDetails:{margin:"0 !important",fontSize:18,fontWeight:"bold",marginRight:100,width:"60%"},addNewButton:{height:36,alignSelf:"center"},back:{width:150,height:50,marginRight:100,fontWeight:"bold",fontSize:"1rem"},edit:{height:30,width:135,alignSelf:"center",fontSize:"1rem",backgroundColor:"blue"}}})),fn=function(){var e=Object(Oe.a)().t,t=gn(),a=Object(r.useState)([]),n=Object(S.a)(a,2),c=n[0],o=n[1],s=Object(b.g)().customerId,i=Object(b.f)(),l=JSON.stringify(s);function u(){return(u=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/customers_simple");case 3:t=e.sent,(a=t.status)>=200&&a<300&&o(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){u.apply(this,arguments)}()}),[]);var d=function(e){var t=null;return c.forEach((function(a){e===a.id&&(t=a.firstName)})),t};!function(e){var t=null;c.forEach((function(a){e===a.id&&(t=a.created)}))}();var j=function(e){var t=null;return c.forEach((function(a){e===a.id&&(t=a.lastName)})),t};return Object(fe.jsx)(ut,{className:t.root,title:e("customer_detail"),children:Object(fe.jsxs)(ot.a,{maxWidth:!1,children:[Object(fe.jsx)("div",{clone:!0,style:{width:"70vw"},children:Object(fe.jsxs)(R.a,{display:"flex",alignItems:"center",justifyContent:"space-between",width:"90%",m:2,children:[Object(fe.jsx)(xe.a,{className:t.back,onClick:function(){return i("/customers")},children:"Go Back"}),Object(fe.jsxs)(R.a,{width:"100%",children:[Object(fe.jsx)(zt.a,{clone:!0,style:{fontWeight:"bold",fontSize:"1.2em"},children:"Customer:\n                  ".concat(d("".concat(JSON.parse(l))),"\n                  ").concat(j("".concat(JSON.parse(l))),"\n                  ")}),Object(fe.jsx)(zt.a,{children:"Created:\n                ".concat(Kt()(c.created).format("DD/MM/YYYY HH:mm"),"\n                ")})]}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.edit,children:"Edit"})]})}),Object(fe.jsx)(On,{data:c,getCustomerByName:d,getCustomerByLastName:j,getCustomerByNumber:function(e){var t=null;return c.forEach((function(a){e===a.id&&(t=a.phoneNumber)})),t},getCustomerByEmail:function(e){var t=null;return c.forEach((function(a){e===a.id&&(t=a.email)})),t}})]})})},vn=function(e){var t=e.data,a=e.searchTerm,n=e.onUpdatePromoCode,c=e.onAskToDeletePromoCode,o=e.getAccountByName,s=e.getRoleByUsersId,i=Object(r.useState)(10),l=Object(S.a)(i,2),u=l[0],j=l[1],h=Object(r.useState)(0),b=Object(S.a)(h,2),m=b[0],p=b[1],x=function(e){j(e.target.value)},O=function(e,t){p(t)},g=s(Object(d.getFirebase)().auth().currentUser.uid).usersRole;return Je(g)?Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Company Name"}),Object(fe.jsx)(Nt.a,{children:"Code"}),Object(fe.jsx)(Nt.a,{children:"Created"}),Object(fe.jsx)(Nt.a,{children:"Procent Discount"}),Object(fe.jsx)(Nt.a,{children:"Tries"}),Object(fe.jsx)(Nt.a,{children:"Valid Until"}),Object(fe.jsx)(Nt.a,{align:"center",children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.code.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,u).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,children:[Object(fe.jsx)(Nt.a,{children:o(e.accountId)}),Object(fe.jsx)(Nt.a,{children:e.code}),Object(fe.jsx)(Nt.a,{children:Kt()(1e3*e.created._seconds).format("DD/MM/YYYY HH:mm")}),Object(fe.jsx)(Nt.a,{children:e.procentDiscount}),Object(fe.jsx)(Nt.a,{children:e.tries}),Object(fe.jsx)(Nt.a,{children:Kt()(1e3*e.validUntil._seconds).format("DD/MM/YYYY HH:mm")}),Object(fe.jsxs)(Nt.a,{align:"center",children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return c(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:O,onRowsPerPageChange:x,page:m,rowsPerPage:u})]}):Object(fe.jsxs)(st.a,{children:[Object(fe.jsx)(St.a,{children:Object(fe.jsxs)(Bt.a,{children:[Object(fe.jsx)(It.a,{children:Object(fe.jsxs)(kt.a,{children:[Object(fe.jsx)(Nt.a,{children:"Code"}),Object(fe.jsx)(Nt.a,{children:"Created"}),Object(fe.jsx)(Nt.a,{children:"Procent Discount"}),Object(fe.jsx)(Nt.a,{children:"Tries"}),Object(fe.jsx)(Nt.a,{children:"Valid Until"}),Object(fe.jsx)(Nt.a,{align:"center",children:"Actions"})]})}),Object(fe.jsx)(Pt.a,{children:t.filter((function(e){return""===a||e.code.toLowerCase().includes(a.toLowerCase())?e:void 0})).slice(0,u).map((function(e){return Object(fe.jsxs)(kt.a,{hover:!0,children:[Object(fe.jsx)(Nt.a,{children:e.code}),Object(fe.jsx)(Nt.a,{children:Kt()(1e3*e.created._seconds).format("DD/MM/YYYY HH:mm")}),Object(fe.jsx)(Nt.a,{children:e.procentDiscount}),Object(fe.jsx)(Nt.a,{children:e.tries}),Object(fe.jsx)(Nt.a,{children:Kt()(1e3*e.validUntil._seconds).format("DD/MM/YYYY HH:mm")}),Object(fe.jsxs)(Nt.a,{align:"center",children:[Object(fe.jsx)(L.a,{onClick:function(t){return n(t,e)},children:Object(fe.jsx)(Ut.a,{})}),Object(fe.jsx)(L.a,{onClick:function(t){return c(t,e)},children:Object(fe.jsx)(Rt.a,{})})]})]},e.id)}))})]})}),Object(fe.jsx)(At.a,{component:"div",count:t.length,onPageChange:O,onRowsPerPageChange:x,page:m,rowsPerPage:u})]})},yn=Object(p.a)((function(e){return{closeIcon:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},selectLabel:{marginTop:16}}})),Cn=function(e){var t=e.showModal,a=e.selectedPromoCode,c=e.closeModal,o=e.getAccountByName,s=e.getRoleByUsersId,i=e.accounts,l=yn(),j=Object(r.useState)(""),h=Object(S.a)(j,2),b=h[0],m=h[1],p=Object(d.useFirestore)(),x=Object(d.getFirebase)().auth().currentUser.uid,O=s(x).usersAccountId,g=Object(_t.a)({enableReinitialize:!0,initialValues:{code:a?a.code:"",procentDiscount:a?a.procentDiscount:"",tries:a?a.tries:"",validUntil:a?a.validUntil:null,accountId:O},validationSchema:qt.d().shape({code:qt.f().min(1).required("Please write a code"),procentDiscount:qt.c().min(1).required("Please put or make sure that the price is 50$ or above"),tries:qt.c().min(1).required("Please put a link address for your image"),accountId:qt.f().min(2).required("please select company name")}),onSubmit:function(){var e=Object(w.a)(k.a.mark((function e(t,r){var o,s,i,l,d,j,h;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.resetForm,t=Object(n.a)(Object(n.a)({},t),{},{updated:p.FieldValue.serverTimestamp()}),null===a){e.next=19;break}return e.prev=3,e.next=6,u.a.auth().currentUser.getIdToken();case 6:return s=e.sent,e.next=9,Re.patch("/adm/promo-code/".concat(a.id),t,{headers:{Authorization:"Bearer ".concat(s)}});case 9:i=e.sent,(l=i.status)>=200&&l<300&&(console.log(i.data),g.setSubmitting(!1),c(),o({values:""})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.error(e.t0);case 17:e.next=34;break;case 19:return t=Object(n.a)(Object(n.a)({},t),{},{created:p.FieldValue.serverTimestamp(),updated:p.FieldValue.serverTimestamp()}),e.prev=20,e.next=23,u.a.auth().currentUser.getIdToken();case 23:return d=e.sent,e.next=26,Re.post("/adm/promo-code",t,{headers:{Authorization:"Bearer ".concat(d)}});case 26:j=e.sent,(h=j.status)>=200&&h<300&&(console.log(j.data),g.setSubmitting(!1),c(),o({values:""})),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(20),console.error(e.t1);case 34:case"end":return e.stop()}}),e,null,[[3,14],[20,31]])})));return function(t,a){return e.apply(this,arguments)}}()});Object(r.useEffect)((function(){m(a?a.accountId:"")}),[b]);var f=s(x).usersRole;return Je(f)?Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:g.handleSubmit,children:[Object(fe.jsxs)(Ha.b,{dateAdapter:Ya.a,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit promo code":"Add promo code"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:l.closeIcon,onClick:c,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(g.touched.code&&g.errors.code),fullWidth:!0,helperText:g.touched.code&&g.errors.code,label:"Code",margin:"normal",name:"code",onBlur:g.handleBlur,onChange:g.handleChange,type:"text",value:g.values.code}),Object(fe.jsx)(mt.a,{error:Boolean(g.touched.procentDiscount&&g.errors.procentDiscount),fullWidth:!0,helperText:g.touched.procentDiscount&&g.errors.procentDiscount,label:"Procent Discount",margin:"normal",name:"procentDiscount",onBlur:g.handleBlur,onChange:g.handleChange,type:"number",value:g.values.procentDiscount}),Object(fe.jsx)(mt.a,{error:Boolean(g.touched.tries&&g.errors.tries),fullWidth:!0,helperText:g.touched.tries&&g.errors.tries,label:"Number Of Tries",margin:"normal",name:"tries",onBlur:g.handleBlur,onChange:g.handleChange,type:"number",value:g.values.tries}),Object(fe.jsx)(R.a,{sx:{mt:2},children:Object(fe.jsx)(Va.a,{label:"Valid Until",value:g.values.validUntil,onChange:function(e){g.setFieldValue("validUntil",e)},renderInput:function(e){return Object(fe.jsx)(mt.a,Object(n.a)({},e))}})}),Object(fe.jsx)(R.a,{sx:{mt:2},children:Object(fe.jsxs)(Ft.a,{fullWidth:!0,children:[Object(fe.jsx)(Dt.a,{id:"Input label",children:"Account"}),Object(fe.jsx)(Lt.a,{labelId:"Input label",id:"Select",error:Boolean(g.touched.accountId&&g.errors.accountId),fullWidth:!0,helpertext:g.touched.accountId&&g.errors.accountId,onBlur:g.handleBlur("accountId"),onChange:g.handleChange("accountId"),value:g.values.accountId,children:i&&i.map((function(e){return Object(fe.jsx)(Mt.a,{value:e.id,children:e.companyName},e.id)}))})]})})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:g.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add promo code"})})]})})}):Object(fe.jsx)(gt.a,{open:t,"aria-labelledby":"form-dialog-title",children:Object(fe.jsx)(st.a,{style:{padding:24},children:Object(fe.jsxs)("form",{onSubmit:g.handleSubmit,children:[Object(fe.jsxs)(Ha.b,{dateAdapter:Ya.a,children:[Object(fe.jsxs)(R.a,{children:[Object(fe.jsx)(zt.a,{color:"textPrimary",variant:"h2",align:"center",children:a?"Edit promo code":"Add promo code"}),Object(fe.jsx)(L.a,{"aria-label":"close",className:l.closeIcon,onClick:c,children:Object(fe.jsx)(ze.a,{})})]}),Object(fe.jsx)(mt.a,{error:Boolean(g.touched.code&&g.errors.code),fullWidth:!0,helperText:g.touched.code&&g.errors.code,label:"Code",margin:"normal",name:"code",onBlur:g.handleBlur,onChange:g.handleChange,type:"text",value:g.values.code}),Object(fe.jsx)(mt.a,{error:Boolean(g.touched.procentDiscount&&g.errors.procentDiscount),fullWidth:!0,helperText:g.touched.procentDiscount&&g.errors.procentDiscount,label:"Procent Discount",margin:"normal",name:"procentDiscount",onBlur:g.handleBlur,onChange:g.handleChange,type:"number",value:g.values.procentDiscount}),Object(fe.jsx)(mt.a,{error:Boolean(g.touched.tries&&g.errors.tries),fullWidth:!0,helperText:g.touched.tries&&g.errors.tries,label:"Number Of Tries",margin:"normal",name:"tries",onBlur:g.handleBlur,onChange:g.handleChange,type:"number",value:g.values.tries}),Object(fe.jsx)(R.a,{sx:{mt:2},children:Object(fe.jsx)(Va.a,{label:"Valid Until",value:g.values.validUntil,onChange:function(e){g.setFieldValue("validUntil",e)},renderInput:function(e){return Object(fe.jsx)(mt.a,Object(n.a)({},e))}})}),Object(fe.jsx)(mt.a,{fullWidth:!0,variant:"outlined",label:"Account",onBlur:g.handleBlur,onChange:g.handleChange,margin:"normal",name:"companyName",type:"text",value:o(O)})]}),Object(fe.jsx)(R.a,{my:2,children:Object(fe.jsx)(xe.a,{color:"primary",disabled:g.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:a?"Save":"Add promo code"})})]})})})},wn=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},searchField:{maxWidth:1e3,display:"flex",alignItems:"center"},searchButton:{marginLeft:e.spacing(2),height:36},addNewButton:{marginLeft:e.spacing(2),height:36,alignSelf:"center"}}})),Sn=function(){var e=Object(Oe.a)().t,t=wn(),a=Object(r.useState)([]),n=Object(S.a)(a,2),c=n[0],o=n[1],s=Object(r.useState)(null),i=Object(S.a)(s,2),l=i[0],j=i[1],h=Object(r.useState)(!1),b=Object(S.a)(h,2),m=b[0],p=b[1],x=Object(r.useState)([]),O=Object(S.a)(x,2),g=O[0],f=O[1],v=Object(r.useState)([]),y=Object(S.a)(v,2),C=y[0],B=y[1],I=Object(r.useState)(!1),N=Object(S.a)(I,2),P=N[0],A=N[1],T=Object(r.useState)(""),U=Object(S.a)(T,2),W=U[0],E=U[1];function F(){return(F=Object(w.a)(k.a.mark((function e(){var t,a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.auth().currentUser.getIdToken();case 3:return t=e.sent,e.next=6,Re.get("/adm/promo-codes",{headers:{Authorization:"Bearer ".concat(t)}});case 6:a=e.sent,(n=a.status)>=200&&n<300&&o(a.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function D(){return(D=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/accounts");case 3:t=e.sent,(a=t.status)>=200&&a<300&&f(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function L(){return(L=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/users");case 3:t=e.sent,(a=t.status)>=200&&a<300&&B(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){D.apply(this,arguments)}(),function(){F.apply(this,arguments)}(),function(){L.apply(this,arguments)}()}),[l,m]);var M=function(){var e=Object(w.a)(k.a.mark((function e(t,a){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),j(a),e.prev=2,e.next=5,Re.delete("/adm/promo-code/".concat(l.id));case 5:n=e.sent,(r=n.status)>=200&&r<300&&j(null),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:A(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}(),z=function(e){var t=null;return g.forEach((function(a){e===a.id&&(t=a.companyName)})),t},_=function(e){var t=null,a=null;return C.forEach((function(n){e===n.id&&(t=n.role,a=n.accountId)})),{usersRole:t,usersAccountId:a}};return Object(fe.jsx)(ut,{className:t.root,title:e("promo Codes"),children:Object(fe.jsxs)(ot.a,{maxWidth:!1,children:[Object(fe.jsx)("div",{children:Object(fe.jsx)(R.a,{children:Object(fe.jsx)(st.a,{children:Object(fe.jsx)(bt.a,{children:Object(fe.jsxs)(R.a,{display:"flex",justifyContent:"space-between",children:[Object(fe.jsxs)(R.a,{className:t.searchField,children:[Object(fe.jsx)(mt.a,{fullWidth:!0,InputProps:{startAdornment:Object(fe.jsx)(pt.a,{position:"start",children:Object(fe.jsx)(xt.a,{fontSize:"small",color:"action",children:Object(fe.jsx)(Ot.a,{})})})},placeholder:"Search by promo code",variant:"outlined",onChange:function(e){E(e.target.value)}}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.searchButton,onClick:function(e){e.preventDefault(),E("")},type:"reset",children:"Search"})]}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.addNewButton,onClick:function(){j(null),p(!0)},children:"Add promo code"})]})})})})}),Object(fe.jsx)(R.a,{mt:3,children:Object(d.isLoaded)(c)?Object(fe.jsx)(vn,{data:c,searchTerm:W,onUpdatePromoCode:function(e,t){e.stopPropagation(),j(t),p(!0)},onAskToDeletePromoCode:function(e,t){e.stopPropagation(),j(t),A(!0)},getAccountByName:z,getRoleByUsersId:_}):Object(fe.jsx)(nt,{})}),Object(fe.jsx)(Cn,{showModal:m,selectedPromoCode:l,accounts:g,closeModal:function(){p(!1)},getAccountByName:z,getRoleByUsersId:_}),Object(fe.jsx)(wt,{showModal:P,title:"Delete promo code?",content:"Are you sure to delete this promo code?",onAccept:M,closeModal:function(){A(!1)}})]})})},Bn=["component","type"],In=function(e){var t=e.component,a=e.type,c=Object(me.a)(e,Bn),o=Object(r.useState)([]),s=Object(S.a)(o,2),i=s[0],l=s[1],u=Object(r.useState)([]),j=Object(S.a)(u,2),h=j[0],m=j[1];function p(){return(p=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/accounts");case 3:t=e.sent,(a=t.status)>=200&&a<300&&l(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function x(){return(x=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/users");case 3:t=e.sent,(a=t.status)>=200&&a<300&&m(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){return function(){p.apply(this,arguments)}(),function(){x.apply(this,arguments)}(),function(){l([])}}),[]);var O=Object(d.getFirebase)().auth().currentUser.uid,g=function(e){var t="";return i.forEach((function(a){e===a.id&&(t=a.type)})),t}(function(e){var t=null,a=null;return h.forEach((function(n){e===n.id&&(t=n.role,a=n.accountId)})),{usersRole:t,usersAccountId:a}}(O).usersAccountId),f=a.includes(g);return console.log("GRANT PERMISSION ",f),O?O?Object(fe.jsx)(t,Object(n.a)({},c)):Object(fe.jsx)(b.a,{to:"/dashboard",replace:!0}):Object(fe.jsx)(b.a,{to:"/login",replace:!0})},kn=[{path:"/",element:Object(fe.jsx)(ct,{}),children:[{path:"dashboard",element:Object(fe.jsx)(jt,{})},{path:"customers",element:Object(fe.jsx)(In,{component:Jt,type:["BASIC_ACCOUNT"]})},{path:"customer-detail/:customerId",element:Object(fe.jsx)(fn,{})},{path:"stations",element:Object(fe.jsx)(In,{component:ta,type:["BASIC_ACCOUNT"]})},{path:"station-detail/:stationId",element:Object(fe.jsx)(In,{component:Qa,type:["BASIC_ACCOUNT"]})},{path:"users",element:Object(fe.jsx)(In,{component:la,type:["BASIC_ACCOUNT"]})},{path:"sites",element:Object(fe.jsx)(In,{component:ba,type:["BASIC_ACCOUNT"]})},{path:"accounts",element:Object(fe.jsx)(In,{component:function(){var e=Object(Oe.a)().t,t=Ia(),a=Object(r.useState)([]),n=Object(S.a)(a,2),c=n[0],o=n[1],s=Object(r.useState)([]),i=Object(S.a)(s,2),l=i[0],u=i[1],j=Object(r.useState)(null),h=Object(S.a)(j,2),b=h[0],m=h[1],p=Object(r.useState)(!1),x=Object(S.a)(p,2),O=x[0],g=x[1],f=Object(r.useState)(!1),v=Object(S.a)(f,2),y=v[0],C=v[1],B=Object(r.useState)(""),I=Object(S.a)(B,2),N=I[0],P=I[1];function A(){return(A=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/accounts");case 3:t=e.sent,(a=t.status)>=200&&a<300&&o(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function T(){return(T=Object(w.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Re.get("/adm/users");case 3:t=e.sent,(a=t.status)>=200&&a<300&&u(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){A.apply(this,arguments)}(),function(){T.apply(this,arguments)}()}),[b,O]);var U=function(){var e=Object(w.a)(k.a.mark((function e(t,a){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),m(a),e.prev=2,e.next=5,Re.delete("/adm/account/".concat(b.id));case 5:n=e.sent,(r=n.status)>=200&&r<300&&m(null),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:C(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}(),W=function(e){var t=null,a=null;return l.forEach((function(n){e===n.id&&(t=n.role,a=n.accountId)})),{usersRole:t,usersAccountId:a}};return Object(fe.jsx)(ut,{className:t.root,title:e("accounts"),children:Object(fe.jsxs)(ot.a,{maxWidth:!1,children:[Object(fe.jsx)("div",{children:Object(fe.jsx)(R.a,{children:Object(fe.jsx)(st.a,{children:Object(fe.jsx)(bt.a,{children:Object(fe.jsxs)(R.a,{display:"flex",justifyContent:"space-between",children:[Object(fe.jsxs)(R.a,{className:t.searchField,children:[Object(fe.jsx)(mt.a,{fullWidth:!0,InputProps:{startAdornment:Object(fe.jsx)(pt.a,{position:"start",children:Object(fe.jsx)(xt.a,{fontSize:"small",color:"action",children:Object(fe.jsx)(Ot.a,{})})})},placeholder:"Search by company or person",variant:"outlined",onChange:function(e){P(e.target.value)}}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.searchButton,onClick:function(e){e.preventDefault(),P("")},type:"reset",children:"Search"})]}),Object(fe.jsx)(xe.a,{color:"primary",variant:"contained",className:t.addNewButton,onClick:function(){m(null),g(!0)},children:"Add new account"})]})})})})}),Object(fe.jsx)(R.a,{mt:3,children:Object(d.isLoaded)(c)?Object(fe.jsx)(wa,{data:c,searchTerm:N,onUpdateAccount:function(e,t){e.stopPropagation(),m(t),g(!0)},onAskToDeleteAccount:function(e,t){e.stopPropagation(),m(t),C(!0)},getRoleByUsersId:W}):Object(fe.jsx)(nt,{})}),Object(fe.jsx)(Ba,{users:l,showModal:O,selectedAccount:b,closeModal:function(){g(!1)},getRoleByUsersId:W}),Object(fe.jsx)(wt,{showModal:y,title:"Delete account?",content:"Are you sure to delete this account?",onAccept:U,closeModal:function(){C(!1)}})]})})},type:["BASIC_ACCOUNT"]})},{path:"products",element:Object(fe.jsx)(In,{component:Ta,type:["BASIC_ACCOUNT"]})},{path:"profile-page",element:Object(fe.jsx)(pn,{})},{path:"promo-codes",element:Object(fe.jsx)(In,{component:Sn,type:["BASIC_ACCOUNT"]})},{path:"checkout-products",element:Object(fe.jsx)(In,{component:rn,type:["BASIC_ACCOUNT"]})},{path:"contract-products",element:Object(fe.jsx)(In,{component:_a,type:["BASIC_ACCOUNT"]})},{path:"extra-products",element:Object(fe.jsx)(In,{component:Fa,type:["BASIC_ACCOUNT"]})},{path:"extra-products",element:Object(fe.jsx)(Fa,{})},{path:"404",element:Object(fe.jsx)(Ca,{})},{path:"/",element:Object(fe.jsx)(b.a,{to:"/dashboard"})},{path:"*",element:Object(fe.jsx)(b.a,{to:"/404"})}]},{path:"/auth",element:Object(fe.jsx)(pa,{}),children:[{path:"login",element:Object(fe.jsx)(Oa,{})},{path:"register",element:Object(fe.jsx)(fa,{})},{path:"*",element:Object(fe.jsx)(b.a,{to:"/404"})}]}],Nn=kn,Pn=function(){var e=Object(b.i)(Nn);return Object(fe.jsxs)(m.a,{theme:C,children:[Object(fe.jsx)(g,{}),e]})},An=a(342),Tn=a(141),Un={en:a(543)};An.a.use(Tn.e).init({resources:Un,lng:"en",interpolation:{escapeValue:!1},react:{useSuspense:!1}});var Wn=An.a,Rn={apiKey:"AIzaSyCcaFVpT979D4mGAsvIbuuZLJ-iSai-YzM",authDomain:"admin-rbac-4a804.firebaseapp.com",projectId:"admin-rbac-4a804",databaseURL:"https://admin-rbac-4a804-rtdb.firebaseio.com",storageBucket:"admin-rbac-4a804.appspot.com",messagingSenderId:"894614615835",appId:"1:894614615835:web:e1fdd352313aaeb7d245be",measurementId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_ENDPOINT:"https://europe-west1-admin-rbac-4a804.cloudfunctions.net",REACT_APP_FIREBASE_API_KEY:"AIzaSyCcaFVpT979D4mGAsvIbuuZLJ-iSai-YzM",REACT_APP_FIREBASE_APP_ID:"1:894614615835:web:e1fdd352313aaeb7d245be",REACT_APP_FIREBASE_AUTH_DOMAIN:"admin-rbac-4a804.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://admin-rbac-4a804-rtdb.firebaseio.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"894614615835",REACT_APP_FIREBASE_PROJECT_ID:"admin-rbac-4a804",REACT_APP_FIREBASE_STORAGE_BUCKET:"admin-rbac-4a804.appspot.com"}).REACT_APP_FIREBASE_MEASUREMENT_ID};u.a.initializeApp(Rn),u.a.firestore();var En=Object(l.b)({firebase:d.firebaseReducer,firestore:j.firestoreReducer});var Fn=Object(l.d)(En,Object(l.c)(l.a.apply(void 0,[]))),Dn={firebase:u.a,config:{userProfile:"v2-users",useFirestoreForProfile:!0},dispatch:Fn.dispatch,createFirestoreInstance:j.createFirestoreInstance};o.a.render(Object(fe.jsx)(i.a,{store:Fn,children:Object(fe.jsx)(h.a,{i18n:Wn,children:Object(fe.jsx)(d.ReactReduxFirebaseProvider,Object(n.a)(Object(n.a)({},Dn),{},{children:Object(fe.jsx)(s.a,{children:Object(fe.jsx)(Pn,{})})}))})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[796,1,2]]]);